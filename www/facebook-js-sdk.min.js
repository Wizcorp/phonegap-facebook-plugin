if(!window.FB){window.FB={_apiKey:null,_authResponse:null,_userStatus:"unknown",_logging:true,_inCanvas:window.name.indexOf("iframe_canvas")>-1||window.name.indexOf("app_runner")>-1,_https:window.name.indexOf("_fb_https")>-1,_domain:{api:"https://api.facebook.com/",api_read:"https://api-read.facebook.com/",cdn:"http://static.ak.fbcdn.net/",https_cdn:"https://s-static.ak.fbcdn.net/",graph:"https://graph.facebook.com/",staticfb:"http://static.ak.facebook.com/",https_staticfb:"https://s-static.ak.facebook.com/",www:"http://www.facebook.com/",https_www:"https://www.facebook.com/",m:"http://m.facebook.com/",https_m:"https://m.facebook.com/"},_locale:null,_localeIsRtl:false,_nativeInterface:null,getDomain:function(domain,noForcedHTTPS){var forceHTTPS=!noForcedHTTPS&&(window.location.protocol=="https:"||FB._https);switch(domain){case"api":return FB._domain.api;case"api_read":return FB._domain.api_read;case"cdn":return forceHTTPS?FB._domain.https_cdn:FB._domain.cdn;case"cdn_foreign":return FB._domain.cdn_foreign;case"https_cdn":return FB._domain.https_cdn;case"graph":return FB._domain.graph;case"staticfb":return forceHTTPS?FB._domain.https_staticfb:FB._domain.staticfb;case"https_staticfb":return FB._domain.https_staticfb;case"www":return forceHTTPS?FB._domain.https_www:FB._domain.www;case"https_www":return FB._domain.https_www;case"m":return forceHTTPS?FB._domain.https_m:FB._domain.m;case"https_m":return FB._domain.https_m}},copy:function(target,source,overwrite,transform){for(var key in source){if(overwrite||typeof target[key]==="undefined"){target[key]=transform?transform(source[key]):source[key]}}return target},create:function(name,value){var node=window.FB,nameParts=name?name.split("."):[],c=nameParts.length;for(var i=0;i<c;i++){var part=nameParts[i];var nso=node[part];if(!nso){nso=value&&i+1==c?value:{};node[part]=nso}node=nso}return node},provide:function(target,source,overwrite){return FB.copy(typeof target=="string"?FB.create(target):target,source,overwrite)},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},log:function(args){if(FB._logging){if(window.Debug&&window.Debug.writeln){window.Debug.writeln(args)}else if(window.console){window.console.log(args)}}if(FB.Event){FB.Event.fire("fb.log",args)}},$:function(id){return document.getElementById(id)}}}FB.provide("Array",{indexOf:function(arr,item){if(arr.indexOf){return arr.indexOf(item)}var length=arr.length;if(length){for(var index=0;index<length;index++){if(arr[index]===item){return index}}}return-1},merge:function(target,source){for(var i=0;i<source.length;i++){if(FB.Array.indexOf(target,source[i])<0){target.push(source[i])}}return target},filter:function(arr,fn){var b=[];for(var i=0;i<arr.length;i++){if(fn(arr[i])){b.push(arr[i])}}return b},keys:function(obj,proto){var arr=[];for(var key in obj){if(proto||obj.hasOwnProperty(key)){arr.push(key)}}return arr},map:function(arr,transform){var ret=[];for(var i=0;i<arr.length;i++){ret.push(transform(arr[i]))}return ret},forEach:function(item,fn,proto){if(!item){return}if(Object.prototype.toString.apply(item)==="[object Array]"||!(item instanceof Function)&&typeof item.length=="number"){if(item.forEach){item.forEach(fn)}else{for(var i=0,l=item.length;i<l;i++){fn(item[i],i,item)}}}else{for(var key in item){if(proto||item.hasOwnProperty(key)){fn(item[key],key,item)}}}},toArray:function(coll){for(var i=0,a=[],len=coll.length;i<len;i++){a[i]=coll[i]}return a}});FB.provide("QS",{encode:function(params,sep,encode){sep=sep===undefined?"&":sep;encode=encode===false?function(s){return s}:encodeURIComponent;var pairs=[];FB.Array.forEach(params,function(val,key){if(val!==null&&typeof val!="undefined"){pairs.push(encode(key)+"="+encode(val))}});pairs.sort();return pairs.join(sep)},decode:function(str){var decode=decodeURIComponent,params={},parts=str.split("&"),i,pair;for(i=0;i<parts.length;i++){pair=parts[i].split("=",2);if(pair&&pair[0]){params[decode(pair[0])]=decode(pair[1]||"")}}return params}});FB.provide("Content",{_root:null,_hiddenRoot:null,_callbacks:{},append:function(content,root){if(!root){if(!FB.Content._root){FB.Content._root=root=FB.$("fb-root");if(!root){FB.log('The "fb-root" div has not been created.');return}else{root.className+=" fb_reset"}}else{root=FB.Content._root}}if(typeof content=="string"){var div=document.createElement("div");root.appendChild(div).innerHTML=content;return div}else{return root.appendChild(content)}},appendHidden:function(content){if(!FB.Content._hiddenRoot){var hiddenRoot=document.createElement("div"),style=hiddenRoot.style;style.position="absolute";style.top="-10000px";style.width=style.height=0;FB.Content._hiddenRoot=FB.Content.append(hiddenRoot)}return FB.Content.append(content,FB.Content._hiddenRoot)},insertIframe:function(opts){opts.id=opts.id||FB.guid();opts.name=opts.name||FB.guid();var guid=FB.guid(),srcSet=false,onloadDone=false;FB.Content._callbacks[guid]=function(){if(srcSet&&!onloadDone){onloadDone=true;opts.onload&&opts.onload(opts.root.firstChild)}};if(document.attachEvent){var html="<iframe"+' id="'+opts.id+'"'+' name="'+opts.name+'"'+(opts.title?' title="'+opts.title+'"':"")+(opts.className?' class="'+opts.className+'"':"")+' style="border:none;'+(opts.width?"width:"+opts.width+"px;":"")+(opts.height?"height:"+opts.height+"px;":"")+'"'+' src="javascript:false;"'+' frameborder="0"'+' scrolling="no"'+' allowtransparency="true"'+' onload="FB.Content._callbacks.'+guid+'()"'+"></iframe>";opts.root.innerHTML='<iframe src="javascript:false"'+' frameborder="0"'+' scrolling="no"'+' style="height:1px"></iframe>';srcSet=true;window.setTimeout(function(){opts.root.innerHTML=html;opts.root.firstChild.src=opts.url;opts.onInsert&&opts.onInsert(opts.root.firstChild)},0)}else{var node=document.createElement("iframe");node.id=opts.id;node.name=opts.name;node.onload=FB.Content._callbacks[guid];node.scrolling="no";node.style.border="none";node.style.overflow="hidden";if(opts.title){node.title=opts.title}if(opts.className){node.className=opts.className}if(opts.height){node.style.height=opts.height+"px"}if(opts.width){if(opts.width=="100%"){node.style.width=opts.width}else{node.style.width=opts.width+"px"}}opts.root.appendChild(node);srcSet=true;node.src=opts.url;opts.onInsert&&opts.onInsert(node)}},submitToTarget:function(opts,get){var form=document.createElement("form");form.action=opts.url;form.target=opts.target;form.method=get?"GET":"POST";FB.Content.appendHidden(form);FB.Array.forEach(opts.params,function(val,key){if(val!==null&&val!==undefined){var input=document.createElement("input");input.name=key;input.value=val;form.appendChild(input)}});form.submit();form.parentNode.removeChild(form)}});FB.provide("Flash",{_minVersions:[[9,0,159,0],[10,0,22,87]],_swfPath:"swf/XdComm.swf",_callbacks:[],_names:{},_unloadRegistered:false,init:function(){if(FB.Flash._init){return}FB.Flash._init=true;window.FB_OnFlashXdCommReady=function(){FB.Flash._ready=true;for(var i=0,l=FB.Flash._callbacks.length;i<l;i++){FB.Flash._callbacks[i]()}FB.Flash._callbacks=[]};FB.Flash.embedSWF("XdComm",FB.getDomain("cdn_foreign")+FB.Flash._swfPath)},embedSWF:function(name,swf,flashvars){var IE=!!document.attachEvent,html="<object "+'type="application/x-shockwave-flash" '+'id="'+name+'" '+(flashvars?'flashvars="'+flashvars+'" ':"")+(IE?'name="'+name+'" ':"")+(IE?"":'data="'+swf+'" ')+(IE?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':"")+'allowscriptaccess="always">'+'<param name="movie" value="'+swf+'"></param>'+'<param name="allowscriptaccess" value="always"></param>'+"</object>";FB.Content.appendHidden(html);if(FB.UA.ie()>=9){if(!FB.Flash._unloadRegistered){var unloadcb=function(){FB.Array.forEach(FB.Flash._names,function(val,key){var elem=document.getElementById(key);if(elem){elem.removeNode(true)}})};window.attachEvent("onunload",unloadcb);FB.Flash._unloadRegistered=true}FB.Flash._names[name]=true}},hasMinVersion:function(){if(typeof FB.Flash._hasMinVersion==="undefined"){var versionString,i,l,version=[];try{versionString=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(x){if(navigator.mimeTypes.length>0){var mimeType="application/x-shockwave-flash";if(navigator.mimeTypes[mimeType].enabledPlugin){var name="Shockwave Flash";versionString=(navigator.plugins[name+" 2.0"]||navigator.plugins[name]).description}}}if(versionString){var parts=versionString.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",");for(i=0,l=parts.length;i<l;i++){version.push(parseInt(parts[i],10))}}FB.Flash._hasMinVersion=false;majorVersion:for(i=0,l=FB.Flash._minVersions.length;i<l;i++){var spec=FB.Flash._minVersions[i];if(spec[0]!=version[0]){continue}for(var m=1,n=spec.length,o=version.length;m<n&&m<o;m++){if(version[m]<spec[m]){FB.Flash._hasMinVersion=false;continue majorVersion}else{FB.Flash._hasMinVersion=true;if(version[m]>spec[m]){break majorVersion}}}}}return FB.Flash._hasMinVersion},onReady:function(cb){FB.Flash.init();if(FB.Flash._ready){window.setTimeout(cb,0)}else{FB.Flash._callbacks.push(cb)}}});if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();FB.provide("JSON",{stringify:function(obj){if(window.Prototype&&Object.toJSON){return Object.toJSON(obj)}else{return JSON.stringify(obj)}},parse:function(str){return JSON.parse(str)},flatten:function(obj){var flat={};for(var key in obj){if(obj.hasOwnProperty(key)){var value=obj[key];if(null===value||undefined===value){continue}else if(typeof value=="string"){flat[key]=value}else{flat[key]=FB.JSON.stringify(value)}}}return flat}});FB.provide("",{api:function(){if(typeof arguments[0]==="string"){FB.ApiServer.graph.apply(FB.ApiServer,arguments)}else{FB.ApiServer.rest.apply(FB.ApiServer,arguments)}}});FB.provide("ApiServer",{METHODS:["get","post","delete","put"],_callbacks:{},_readOnlyCalls:{fql_query:true,fql_multiquery:true,friends_get:true,notifications_get:true,stream_get:true,users_getinfo:true},graph:function(){var args=Array.prototype.slice.call(arguments),atoms=args.shift().match(/\/?([^?]*)\??([^#]*)/),path=atoms[1],next=args.shift(),method,params,cb;while(next){var type=typeof next;if(type==="string"&&!method){method=next.toLowerCase()}else if(type==="function"&&!cb){cb=next}else if(type==="object"&&!params){params=next}else{FB.log("Invalid argument passed to FB.api(): "+next);return}next=args.shift()}method=method||"get";params=FB.copy(params||{},FB.QS.decode(atoms[2]));if(FB.Array.indexOf(FB.ApiServer.METHODS,method)<0){FB.log("Invalid method passed to FB.api(): "+method);return}FB.ApiServer.oauthRequest("graph",path,method,params,cb)},rest:function(params,cb){var method=params.method.toLowerCase().replace(".","_");if(FB.Auth&&method==="auth_revokeauthorization"){var old_cb=cb;cb=function(response){if(response===true){FB.Auth.setAuthResponse(null,"not_authorized")}old_cb&&old_cb(response)}}params.format="json-strings";params.api_key=FB._apiKey;var domain=FB.ApiServer._readOnlyCalls[method]?"api_read":"api";FB.ApiServer.oauthRequest(domain,"restserver.php","get",params,cb)},oauthRequest:function(domain,path,method,params,cb){if(!params.access_token&&FB.getAccessToken()){params.access_token=FB.getAccessToken()}params.sdk="joey";params.pretty=0;var oldCb=cb;cb=function(response){if(FB.Auth&&response&&FB.getAccessToken()==params.access_token&&(response.error_code==="190"||response.error&&(response.error==="invalid_token"||response.error.type==="OAuthException"))){FB.getLoginStatus(null,true)}oldCb&&oldCb(response)};try{FB.ApiServer.jsonp(domain,path,method,FB.JSON.flatten(params),cb)}catch(e1_ignore){try{if(!FB.initSitevars.corsKillSwitch&&FB.ApiServer.corsPost(domain,path,method,FB.JSON.flatten(params),cb)){return}}catch(e2_ignore){}if(FB.Flash.hasMinVersion()){FB.ApiServer.flash(domain,path,method,FB.JSON.flatten(params),cb)}else{throw new Error("Your browser does not support long connect "+"requests. You can fix this problem by upgrading your browser "+"or installing the latest version of Flash")}}},corsPost:function(domain,path,method,params,cb){var url=FB.getDomain(domain)+path;if(domain=="graph"){params.method=method}var encoded_params=FB.QS.encode(params);var content_type="application/x-www-form-urlencoded";var request=FB.ApiServer._createCORSRequest("POST",url,content_type);if(request){request.onload=function(){cb&&cb(FB.JSON.parse(request.responseText))};request.send(encoded_params);return true}else{return false}},_createCORSRequest:function(method,url,content_type){if(!window.XMLHttpRequest){return null}var xhr=new XMLHttpRequest;if("withCredentials"in xhr){xhr.open(method,url,true);xhr.setRequestHeader("Content-type",content_type)}else if(window.XDomainRequest){xhr=new XDomainRequest;xhr.open(method,url)}else{xhr=null}return xhr},jsonp:function(domain,path,method,params,cb){var g=FB.guid(),script=document.createElement("script");if(domain==="graph"&&method!=="get"){params.method=method}params.callback="FB.ApiServer._callbacks."+g;var url=FB.getDomain(domain)+path+(path.indexOf("?")>-1?"&":"?")+FB.QS.encode(params);if(url.length>2e3){throw new Error("JSONP only support a maximum of 2000 bytes of input.")}FB.ApiServer._callbacks[g]=function(response){cb&&cb(response);delete FB.ApiServer._callbacks[g];script.parentNode.removeChild(script)};script.src=url;document.getElementsByTagName("head")[0].appendChild(script)},flash:function(domain,path,method,params,cb){if(!window.FB_OnXdHttpResult){window.FB_OnXdHttpResult=function(reqId,data){FB.ApiServer._callbacks[reqId](decodeURIComponent(data))}}FB.Flash.onReady(function(){if(domain==="graph"){params.suppress_http_code=1}var url=FB.getDomain(domain)+path,body=FB.QS.encode(params);if(method==="get"){if(url.length+body.length>2e3){if(domain==="graph"){params.method="get"}method="post";body=FB.QS.encode(params)}else{url+=(url.indexOf("?")>-1?"&":"?")+body;body=""}}else if(method!=="post"){if(domain==="graph"){params.method=method}method="post";body=FB.QS.encode(params)}var reqId=document.XdComm.sendXdHttpRequest(method.toUpperCase(),url,body,null);FB.ApiServer._callbacks[reqId]=function(response){cb&&cb(FB.JSON.parse(response));delete FB.ApiServer._callbacks[reqId]}})}});FB.provide("EventProvider",{subscribers:function(){if(!this._subscribersMap){this._subscribersMap={}}return this._subscribersMap},subscribe:function(name,cb){var subs=this.subscribers();if(!subs[name]){subs[name]=[cb]}else{subs[name].push(cb)}},unsubscribe:function(name,cb){var subs=this.subscribers()[name];FB.Array.forEach(subs,function(value,key){if(value==cb){subs[key]=null}})},monitor:function(name,callback){if(!callback()){var ctx=this,fn=function(){if(callback.apply(callback,arguments)){ctx.unsubscribe(name,fn)}};this.subscribe(name,fn)}},clear:function(name){delete this.subscribers()[name]},fire:function(){var args=Array.prototype.slice.call(arguments),name=args.shift();FB.Array.forEach(this.subscribers()[name],function(sub){if(sub){sub.apply(this,args)}})},listen:function(element,event,func){if(element.addEventListener){element.addEventListener(event,func,false)}else if(element.attachEvent){element.attachEvent("on"+event,func)}},unlisten:function(element,event,func){if(element.removeEventListener){element.removeEventListener(event,func,false)}else if(element.detachEvent){element.detachEvent("on"+event,func)}}});FB.provide("Event",FB.EventProvider);FB.provide("XD",{_origin:null,_transport:null,_callbacks:{},_forever:{},_xdProxyUrl:"connect/xd_proxy.php",_openerTransport:null,_openerOrigin:null,_nonOpenerOrigin:null,init:function(channelUrl){if(FB.XD._origin){return}var postMessageOrigin=window.location.protocol+"//"+window.location.host+"/"+FB.guid();if(window.addEventListener&&!window.attachEvent&&window.postMessage){FB.XD._origin=postMessageOrigin;FB.XD.PostMessage.init();FB.XD._transport="postmessage"}else if(!channelUrl&&FB.Flash.hasMinVersion()){if(document.getElementById("fb-root")){var domain=document.domain;if(domain=="facebook.com"){domain=window.location.host}FB.XD._origin=window.location.protocol+"//"+domain+"/"+FB.guid();FB.XD.Flash.init();FB.XD._transport="flash"}else{if(FB.log){FB.log("missing fb-root, defaulting to fragment-based xdcomm")}FB.XD._transport="fragment";FB.XD.Fragment._channelUrl=channelUrl||window.location.toString()}}else{FB.XD._transport="fragment";FB.XD.Fragment._channelUrl=channelUrl||window.location.toString()}var IE=!!window.attachEvent;if(FB.XD._transport!="postmessage"&&IE&&window.postMessage){FB.XD._openerTransport=FB.XD._transport;FB.XD._openerOrigin=FB.XD._origin;FB.XD._nonOpenerOrigin=postMessageOrigin}},resolveRelation:function(id){var pt,matches,parts=id.split("."),node=window;for(var i=0,l=parts.length;i<l;i++){pt=parts[i];if(pt==="opener"||pt==="parent"||pt==="top"){node=node[pt]}else if(matches=/^frames\[['"]?([a-zA-Z0-9-_]+)['"]?\]$/.exec(pt)){node=node.frames[matches[1]]}else{throw new SyntaxError("Malformed id to resolve: "+id+", pt: "+pt)}}return node},handler:function(cb,relation,forever,id,force_https){if(window.location.toString().indexOf(FB.XD.Fragment._magic)>0){return"javascript:false;//"}if(FB.initSitevars.forceSecureXdProxy){force_https=true}var xdProxy=FB.getDomain((force_https?"https_":"")+"cdn")+FB.XD._xdProxyUrl+"#";id=id||FB.guid();relation=relation||"opener";if(FB.XD._openerTransport){if(relation=="opener"){FB.XD._transport=FB.XD._openerTransport;FB.XD._origin=FB.XD._openerOrigin}else{FB.XD.PostMessage.init();FB.XD._transport="postmessage";FB.XD._origin=FB.XD._nonOpenerOrigin}}if(FB.XD._transport=="fragment"){xdProxy=FB.XD.Fragment._channelUrl;var poundIndex=xdProxy.indexOf("#");if(poundIndex>0){xdProxy=xdProxy.substr(0,poundIndex)}xdProxy+=(xdProxy.indexOf("?")<0?"?":"&")+FB.XD.Fragment._magic+"#?=&"}if(forever){FB.XD._forever[id]=true}FB.XD._callbacks[id]=cb;return xdProxy+FB.QS.encode({cb:id,origin:FB.XD._origin,relation:relation,transport:FB.XD._transport})},recv:function(data){if(typeof data=="string"){try{data=FB.JSON.parse(data)}catch(e){data=FB.QS.decode(data)}}var cb=FB.XD._callbacks[data.cb];if(!FB.XD._forever[data.cb]){delete FB.XD._callbacks[data.cb]}cb&&cb(data)},PostMessage:{_isInitialized:false,init:function(){if(!FB.XD.PostMessage._isInitialized){var H=FB.XD.PostMessage.onMessage;window.addEventListener?window.addEventListener("message",H,false):window.attachEvent("onmessage",H);FB.XD.PostMessage._isInitialized=true}},onMessage:function(event){FB.XD.recv(event.data)}},WebView:{onMessage:function(dest,origin,msg){FB.XD.recv(msg)}},Flash:{init:function(){FB.Flash.onReady(function(){document.XdComm.postMessage_init("FB.XD.Flash.onMessage",FB.XD._openerOrigin?FB.XD._openerOrigin:FB.XD._origin)})},onMessage:function(message){FB.XD.recv(decodeURIComponent(message))}},Fragment:{_magic:"fb_xd_fragment",checkAndDispatch:function(){var loc=window.location.toString(),fragment=loc.substr(loc.indexOf("#")+1),magicIndex=loc.indexOf(FB.XD.Fragment._magic);if(magicIndex>0){FB.init=FB.getLoginStatus=FB.api=function(){};document.documentElement.style.display="none";FB.XD.resolveRelation(FB.QS.decode(fragment).relation).FB.XD.recv(fragment)}}}});FB.XD.Fragment.checkAndDispatch();FB.provide("UA",{ie:function(){return FB.UA._populate()||this._ie},firefox:function(){return FB.UA._populate()||this._firefox},opera:function(){return FB.UA._populate()||this._opera},safari:function(){return FB.UA._populate()||this._safari},chrome:function(){return FB.UA._populate()||this._chrome},windows:function(){return FB.UA._populate()||this._windows},osx:function(){return FB.UA._populate()||this._osx},linux:function(){return FB.UA._populate()||this._linux},ios:function(){FB.UA._populate();return FB.UA.mobile()&&this._ios},mobile:function(){FB.UA._populate();return!FB._inCanvas&&this._mobile},nativeApp:function(){return FB.UA.mobile()&&navigator.userAgent.match(/FBAN\/\w+;/i)},android:function(){FB.UA._populate();return FB.UA.mobile()&&this._android},iPad:function(){FB.UA._populate();return FB.UA.mobile()&&this._iPad},_populated:false,_populate:function(){if(FB.UA._populated){return}FB.UA._populated=true;var agent=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(navigator.userAgent);var os=/(Mac OS X)|(Windows)|(Linux)/.exec(navigator.userAgent);var ios=/\b(iPhone|iP[ao]d)/.exec(navigator.userAgent);FB.UA._iPad=/\b(iPad)/.exec(navigator.userAgent);FB.UA._android=navigator.userAgent.match(/Android/i);FB.UA._mobile=ios||FB.UA._android||navigator.userAgent.match(/Mobile/i);if(agent){FB.UA._ie=agent[1]?parseFloat(agent[1]):NaN;if(FB.UA._ie>=8&&!window.HTMLCollection){FB.UA._ie=7}FB.UA._firefox=agent[2]?parseFloat(agent[2]):NaN;FB.UA._opera=agent[3]?parseFloat(agent[3]):NaN;FB.UA._safari=agent[4]?parseFloat(agent[4]):NaN;if(FB.UA._safari){agent=/(?:Chrome\/(\d+\.\d+))/.exec(navigator.userAgent);FB.UA._chrome=agent&&agent[1]?parseFloat(agent[1]):NaN}else{FB.UA._chrome=NaN}}else{FB.UA._ie=FB.UA._firefox=FB.UA._opera=FB.UA._chrome=FB.UA._safari=NaN}if(os){FB.UA._osx=!!os[1];FB.UA._windows=!!os[2];FB.UA._linux=!!os[3]}else{FB.UA._osx=FB.UA._windows=FB.UA._linux=false}FB.UA._ios=ios}});FB.provide("Arbiter",{_canvasProxyUrl:"connect/canvas_proxy.php",BEHAVIOR_EVENT:"e",BEHAVIOR_PERSISTENT:"p",BEHAVIOR_STATE:"s",inform:function(method,params,relation,https,behavior){if(FB.Canvas.isTabIframe()||FB._inPlugin&&window.postMessage||!FB._inCanvas&&FB.UA.mobile()&&window.postMessage){var msg=FB.JSON.stringify({method:method,params:params,behavior:behavior||FB.Arbiter.BEHAVIOR_PERSISTENT});if(window.postMessage){FB.XD.resolveRelation(relation||"parent").postMessage(msg,"*");return}else{try{window.opener.postMessage(msg);return}catch(e){}}}https|=window!=window.parent&&document.referrer.indexOf("https:")===0;var url=FB.getDomain((https?"https_":"")+"staticfb",true)+FB.Arbiter._canvasProxyUrl+"#"+FB.QS.encode({method:method,params:FB.JSON.stringify(params||{}),behavior:behavior||FB.Arbiter.BEHAVIOR_PERSISTENT,relation:relation});var root=FB.Content.appendHidden("");FB.Content.insertIframe({url:url,root:root,width:1,height:1,onload:function(){setTimeout(function(){root.parentNode.removeChild(root)},10)}})}});FB.provide("Canvas",{_timer:null,_lastSize:{},_pageInfo:{clientWidth:0,clientHeight:0,scrollLeft:0,scrollTop:0,offsetLeft:0,offsetTop:0},getPageInfo:function(appCallback){var relation="top.frames["+window.name+"]";var channelUrl=FB.XD.handler(function(data){for(var i in FB.Canvas._pageInfo){if(data[i]){FB.Canvas._pageInfo[i]=data[i]|0}}appCallback&&appCallback(FB.Canvas._pageInfo)},relation,true);var params={channelUrl:channelUrl,frame:window.name};FB.Arbiter.inform("getPageInfo",params,"top")},hideFlashElement:function(elem){elem.style.visibility="hidden"},showFlashElement:function(elem){elem.style.visibility=""},_flashClassID:"CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",_hideFlashCallback:function(params){var candidates=window.document.getElementsByTagName("object");for(var i=0;i<candidates.length;i++){var elem=candidates[i];if(elem.type.toLowerCase()!="application/x-shockwave-flash"&&elem.classid.toUpperCase()!=FB.Canvas._flashClassID){continue}var good=false;for(var j=0;j<elem.childNodes.length;j++){if(elem.childNodes[j].nodeName.toLowerCase()=="param"&&elem.childNodes[j].name.toLowerCase()=="wmode"){if(elem.childNodes[j].value.toLowerCase()=="opaque"||elem.childNodes[j].value.toLowerCase()=="transparent"){good=true}}}if(!good){var rand=Math.random();if(rand<=1/1e3){FB.api(FB._apiKey+"/occludespopups","post",{})}if(FB.Canvas._devHideFlashCallback){var wait_ms=200;var devArgs={state:params.state,elem:elem};var fnToggle=FB.bind(function(devParams){if(devParams.state=="opened"){FB.Canvas.hideFlashElement(devParams.elem)}else{FB.Canvas.showFlashElement(devParams.elem)}},this,devArgs);setTimeout(fnToggle,wait_ms);FB.Canvas._devHideFlashCallback(devArgs)}else{if(params.state=="opened"){elem._old_visibility=elem.style.visibility;elem.style.visibility="hidden"}else if(params.state=="closed"){elem.style.visibility=elem._old_visibility;delete elem._old_visibility}}}}},_devHideFlashCallback:null,_setHideFlashCallback:function(callback){FB.Canvas._devHideFlashCallback=callback},init:function(){var view=FB.Dom.getViewportInfo();FB.Canvas._pageInfo.clientWidth=view.width;FB.Canvas._pageInfo.clientHeight=view.height;FB.Canvas.getPageInfo();var channelUrl=FB.XD.handler(FB.Canvas._hideFlashCallback,"top.frames["+window.name+"]",true);FB.Arbiter.inform("iframeSetupFlashHiding",{channelUrl:channelUrl})},setSize:function(params){if(typeof params!="object"){params={}}var minShrink=0,minGrow=0;params=params||{};if(params.width==null||params.height==null){params=FB.copy(params,FB.Canvas._computeContentSize());minShrink=16;minGrow=4}params=FB.copy(params,{frame:window.name||"iframe_canvas"});if(FB.Canvas._lastSize[params.frame]){var oldHeight=FB.Canvas._lastSize[params.frame].height;var dHeight=params.height-oldHeight;if(FB.Canvas._lastSize[params.frame].width==params.width&&(dHeight<=minGrow&&dHeight>=-minShrink)){return false}}FB.Canvas._lastSize[params.frame]=params;FB.Arbiter.inform("setSize",params);return true},scrollTo:function(x,y){FB.Arbiter.inform("scrollTo",{frame:window.name||"iframe_canvas",x:x,y:y})},setAutoGrow:function(onOrOff,interval){if(interval===undefined&&typeof onOrOff=="number"){interval=onOrOff;onOrOff=true}if(onOrOff===undefined||onOrOff){if(FB.Canvas._timer===null){FB.Canvas._timer=window.setInterval(FB.Canvas.setSize,interval||100)}FB.Canvas.setSize()}else{if(FB.Canvas._timer!==null){window.clearInterval(FB.Canvas._timer);FB.Canvas._timer=null}}},setAutoResize:function(onOrOff,interval){return FB.Canvas.setAutoGrow(onOrOff,interval)},isTabIframe:function(){return window.name.indexOf("app_runner_")===0},setDoneLoading:function(callback){FB.Canvas._passAppTtiMessage(callback,"RecordIframeAppTti")},stopTimer:function(callback){FB.Canvas._passAppTtiMessage(callback,"StopIframeAppTtiTimer")},setUrlHandler:function(callback){var channelUrl=FB.XD.handler(callback,"top.frames["+window.name+"]",true);FB.Arbiter.inform("setUrlHandler",channelUrl);FB.Event.listen(window,"load",function(){FB.Arbiter.inform("setUrlHandler",channelUrl)})},startTimer:function(){FB.Canvas._passAppTtiMessage(null,"StartIframeAppTtiTimer")},_passAppTtiMessage:function(callback,message_name){var devCallback=null;if(callback){devCallback=FB.XD.handler(callback,"top.frames["+window.name+"]",false)}FB.Arbiter.inform(message_name,{frame:window.name||"iframe_canvas",time:(new Date).getTime(),appId:parseInt(FB._apiKey,10),channelUrl:devCallback})},_computeContentSize:function(){var body=document.body,docElement=document.documentElement,right=0,bodyTop=Math.max(body.offsetTop,0),docTop=Math.max(docElement.offsetTop,0),bodyScroll=body.scrollHeight+bodyTop,bodyOffset=body.offsetHeight+bodyTop,docScroll=docElement.scrollHeight+docTop,docOffset=docElement.offsetHeight+docTop;bottom=Math.max(bodyScroll,bodyOffset,docScroll,docOffset);if(body.offsetWidth<body.scrollWidth){right=body.scrollWidth+body.offsetLeft}else{FB.Array.forEach(body.childNodes,function(child){var childRight=child.offsetWidth+child.offsetLeft;if(childRight>right){right=childRight}})}if(docElement.clientLeft>0){right+=docElement.clientLeft*2}if(docElement.clientTop>0){bottom+=docElement.clientTop*2}return{height:bottom,width:right}}});FB.provide("String",{trim:function(s){return s.replace(/^\s*|\s*$/g,"")},format:function(format){if(!FB.String.format._formatRE){FB.String.format._formatRE=/(\{[^\}^\{]+\})/g}var values=arguments;return format.replace(FB.String.format._formatRE,function(str,m){var index=parseInt(m.substr(1),10),value=values[index+1];if(value===null||value===undefined){return""}return value.toString()})},escapeHTML:function(value){var div=document.createElement("div");div.appendChild(document.createTextNode(value));return div.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&#39;")},quote:function(value){var quotes=/["\\\x00-\x1f\x7f-\x9f]/g,subst={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return quotes.test(value)?'"'+value.replace(quotes,function(a){var c=subst[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"'}});FB.provide("Dom",{containsCss:function(dom,className){var cssClassWithSpace=" "+dom.className+" ";return cssClassWithSpace.indexOf(" "+className+" ")>=0},addCss:function(dom,className){if(!FB.Dom.containsCss(dom,className)){dom.className=dom.className+" "+className}},removeCss:function(dom,className){if(FB.Dom.containsCss(dom,className)){dom.className=dom.className.replace(className,"");FB.Dom.removeCss(dom,className)}},getByClass:function(className,dom,tagName){dom=dom||document.body;tagName=tagName||"*";if(dom.querySelectorAll){return FB.Array.toArray(dom.querySelectorAll(tagName+"."+className))
}var all=dom.getElementsByTagName(tagName),els=[];for(var i=0,len=all.length;i<len;i++){if(this.containsCss(all[i],className)){els[els.length]=all[i]}}return els},getStyle:function(dom,styleProp){var y=false,s=dom.style;if(dom.currentStyle){FB.Array.forEach(styleProp.match(/\-([a-z])/g),function(match){styleProp=styleProp.replace(match,match.substr(1,1).toUpperCase())});y=dom.currentStyle[styleProp]}else{FB.Array.forEach(styleProp.match(/[A-Z]/g),function(match){styleProp=styleProp.replace(match,"-"+match.toLowerCase())});if(window.getComputedStyle){y=document.defaultView.getComputedStyle(dom,null).getPropertyValue(styleProp);if(styleProp=="background-position-y"||styleProp=="background-position-x"){if(y=="top"||y=="left"){y="0px"}}}}if(styleProp=="opacity"){if(dom.filters&&dom.filters.alpha){return y}return y*100}return y},setStyle:function(dom,styleProp,value){var s=dom.style;if(styleProp=="opacity"){if(value>=100){value=99.999}if(value<0){value=0}s.opacity=value/100;s.MozOpacity=value/100;s.KhtmlOpacity=value/100;if(dom.filters){if(dom.filters.alpha==undefined){dom.filter="alpha(opacity="+value+")"}else{dom.filters.alpha.opacity=value}}}else{s[styleProp]=value}},addScript:function(src){var script=document.createElement("script");script.type="text/javascript";script.src=src;return document.getElementsByTagName("head")[0].appendChild(script)},addCssRules:function(styles,names){if(!FB.Dom._cssRules){FB.Dom._cssRules={}}var allIncluded=true;FB.Array.forEach(names,function(id){if(!(id in FB.Dom._cssRules)){allIncluded=false;FB.Dom._cssRules[id]=true}});if(allIncluded){return}if(!FB.UA.ie()){var style=document.createElement("style");style.type="text/css";style.textContent=styles;document.getElementsByTagName("head")[0].appendChild(style)}else{try{document.createStyleSheet().cssText=styles}catch(exc){if(document.styleSheets[0]){document.styleSheets[0].cssText+=styles}}}},getViewportInfo:function(){var root=document.documentElement&&document.compatMode=="CSS1Compat"?document.documentElement:document.body;return{scrollTop:root.scrollTop,scrollLeft:root.scrollLeft,width:self.innerWidth?self.innerWidth:root.clientWidth,height:self.innerHeight?self.innerHeight:root.clientHeight}},ready:function(fn){if(FB.Dom._isReady){fn&&fn()}else{FB.Event.subscribe("dom.ready",fn)}},getPosition:function(node){var x=0,y=0;do{x+=node.offsetLeft;y+=node.offsetTop}while(node=node.offsetParent);return{x:x,y:y}}});(function(){function domReady(){FB.Dom._isReady=true;FB.Event.fire("dom.ready");FB.Event.clear("dom.ready")}if(FB.Dom._isReady||document.readyState=="complete"){return domReady()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",domReady,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",domReady)}if(FB.UA.ie()&&window===top){(function(){try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}domReady()})()}var oldonload=window.onload;window.onload=function(){domReady();if(oldonload){if(typeof oldonload=="string"){eval(oldonload)}else{oldonload()}}}})();FB.provide("Intl",function(){var _punctCharClass="["+".!?"+"。"+"！"+"？"+"।"+"…"+"ຯ"+"᠁"+"ฯ"+"．"+"]";function _endsInPunct(str){if(typeof str!="string"){return false}return str.match(new RegExp(_punctCharClass+"["+')"'+"'"+"»"+"༻"+"༽"+"’"+"”"+"›"+"〉"+"》"+"」"+"』"+"】"+"〕"+"〗"+"〙"+"〛"+"〞"+"〟"+"﴿"+"＇"+"）"+"］"+"s"+"]*$"))}function _substituteTokens(str,args){if(args!==undefined){if(typeof args!="object"){FB.log("The second arg to FB.Intl.tx() must be an Object for "+"FB.Intl.tx("+str+", ...)")}else{var regexp;for(var key in args){if(args.hasOwnProperty(key)){if(_endsInPunct(args[key])){regexp=new RegExp("{"+key+"}"+_punctCharClass+"*","g")}else{regexp=new RegExp("{"+key+"}","g")}str=str.replace(regexp,args[key])}}}}return str}function tx(str,args){if(!FB.Intl._stringTable){return null}return _substituteTokens(FB.Intl._stringTable[str],args)}tx._=_substituteTokens;return{tx:tx,_tx:_substituteTokens}}());FB.provide("",{bind:function(){var args=Array.prototype.slice.call(arguments),fn=args.shift(),context=args.shift();return function(){return fn.apply(context,args.concat(Array.prototype.slice.call(arguments)))}},Class:function(name,constructor,proto){if(FB.CLASSES[name]){return FB.CLASSES[name]}var newClass=constructor||function(){};newClass.prototype=proto;newClass.prototype.bind=function(fn){return FB.bind(fn,this)};newClass.prototype.constructor=newClass;FB.create(name,newClass);FB.CLASSES[name]=newClass;return newClass},subclass:function(name,baseName,constructor,proto){if(FB.CLASSES[name]){return FB.CLASSES[name]}var base=FB.create(baseName);FB.copy(proto,base.prototype);proto._base=base;proto._callBase=function(method){var args=Array.prototype.slice.call(arguments,1);return base.prototype[method].apply(this,args)};return FB.Class(name,constructor?constructor:function(){if(base.apply){base.apply(this,arguments)}},proto)},CLASSES:{}});FB.provide("Type",{isType:function(obj,type){while(obj){if(obj.constructor===type||obj===type){return true}else{obj=obj._base}}return false}});FB.Class("Obj",null,FB.copy({setProperty:function(name,value){if(FB.JSON.stringify(value)!=FB.JSON.stringify(this[name])){this[name]=value;this.fire(name,value)}}},FB.EventProvider));FB.subclass("Dialog","Obj",function(id){this.id=id;if(!FB.Dialog._dialogs){FB.Dialog._dialogs={};FB.Dialog._addOrientationHandler()}FB.Dialog._dialogs[id]=this},{});FB.provide("Dialog",{_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,_popStateListenerOn:false,_hideOnPopState:function(e){FB.Dialog.hide(FB.Dialog._stack.pop())},get:function(id){return FB.Dialog._dialogs[id]},_findRoot:function(node){while(node){if(FB.Dom.containsCss(node,"fb_dialog")){return node}node=node.parentNode}},_createWWWLoader:function(width){width=parseInt(width,10);width=width?width:460;return FB.Dialog.create({content:'<div class="dialog_title">'+'  <a id="fb_dialog_loader_close">'+'    <div class="fb_dialog_close_icon"></div>'+"  </a>"+"  <span>Facebook</span>"+'  <div style="clear:both;"></div>'+"</div>"+'<div class="dialog_content"></div>'+'<div class="dialog_footer"></div>',width:width})},_createMobileLoader:function(){var chrome=FB.UA.nativeApp()?"":"<table>"+"  <tbody>"+"    <tr>"+'      <td class="header_left">'+'        <label class="touchable_button">'+'          <input type="submit" value="'+FB.Intl.tx._("Cancel")+'"'+'            id="fb_dialog_loader_close"/>'+"        </label>"+"      </td>"+'      <td class="header_center">'+"        <div>"+FB.Intl.tx._("Loading...")+"</div>"+"      </td>"+'      <td class="header_right">'+"      </td>"+"    </tr>"+"  </tbody>"+"</table>";return FB.Dialog.create({classes:"loading"+(FB.UA.iPad()?" centered":""),content:'<div class="dialog_header">'+chrome+"</div>"})},_restoreBodyPosition:function(){if(!FB.UA.iPad()){var body=document.getElementsByTagName("body")[0];FB.Dom.removeCss(body,"fb_hidden")}},_showIPadOverlay:function(){if(!FB.UA.iPad()){return}if(!FB.Dialog._overlayEl){FB.Dialog._overlayEl=document.createElement("div");FB.Dialog._overlayEl.setAttribute("id","fb_dialog_ipad_overlay");FB.Content.append(FB.Dialog._overlayEl,null)}FB.Dialog._overlayEl.className=""},_hideIPadOverlay:function(){if(FB.UA.iPad()){FB.Dialog._overlayEl.className="hidden"}},showLoader:function(cb,width){FB.Dialog._showIPadOverlay();if(!FB.Dialog._loaderEl){FB.Dialog._loaderEl=FB.Dialog._findRoot(FB.UA.mobile()?FB.Dialog._createMobileLoader():FB.Dialog._createWWWLoader(width))}if(!cb){cb=function(){}}var loaderClose=FB.$("fb_dialog_loader_close");FB.Dom.removeCss(loaderClose,"fb_hidden");loaderClose.onclick=function(){FB.Dialog._hideLoader();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay();cb()};var iPadOverlay=FB.$("fb_dialog_ipad_overlay");if(iPadOverlay){iPadOverlay.ontouchstart=loaderClose.onclick}FB.Dialog._makeActive(FB.Dialog._loaderEl)},_hideLoader:function(){if(FB.Dialog._loaderEl&&FB.Dialog._loaderEl==FB.Dialog._active){FB.Dialog._loaderEl.style.top="-10000px"}},_makeActive:function(el){FB.Dialog._setDialogSizes();FB.Dialog._lowerActive();FB.Dialog._active=el;if(FB.Canvas){FB.Canvas.getPageInfo(function(pageInfo){FB.Dialog._centerActive(pageInfo)})}FB.Dialog._centerActive(FB.Canvas._pageInfo)},_lowerActive:function(){if(!FB.Dialog._active){return}FB.Dialog._active.style.top="-10000px";FB.Dialog._active=null},_removeStacked:function(dialog){FB.Dialog._stack=FB.Array.filter(FB.Dialog._stack,function(node){return node!=dialog})},_centerActive:function(pageInfo){var dialog=FB.Dialog._active;if(!dialog){return}var view=FB.Dom.getViewportInfo();var width=parseInt(dialog.offsetWidth,10);var height=parseInt(dialog.offsetHeight,10);var left=view.scrollLeft+(view.width-width)/2;var minTop=(view.height-height)/2.5;if(left<minTop){minTop=left}var maxTop=view.height-height-minTop;var top=(view.height-height)/2;if(pageInfo){top=pageInfo.scrollTop-pageInfo.offsetTop+(pageInfo.clientHeight-height)/2}if(top<minTop){top=minTop}else if(top>maxTop){top=maxTop}top+=view.scrollTop;if(FB.UA.mobile()){var paddingHeight=100;if(FB.UA.iPad()){paddingHeight+=(view.height-height)/2}else{var body=document.getElementsByTagName("body")[0];FB.Dom.addCss(body,"fb_hidden");left=1e4;top=1e4}var paddingDivs=FB.Dom.getByClass("fb_dialog_padding",dialog);if(paddingDivs.length){paddingDivs[0].style.height=paddingHeight+"px"}}dialog.style.left=(left>0?left:0)+"px";dialog.style.top=(top>0?top:0)+"px"},_setDialogSizes:function(){if(!FB.UA.mobile()||FB.UA.iPad()){return}for(var id in FB.Dialog._dialogs){if(document.getElementById(id)){var iframe=document.getElementById(id);iframe.style.width=FB.UIServer.getDefaultSize().width+"px";iframe.style.height=FB.UIServer.getDefaultSize().height+"px"}}},_handleOrientationChange:function(e){if(FB.UA.android()&&screen.availWidth==FB.Dialog._availScreenWidth){window.setTimeout(FB.Dialog._handleOrientationChange,50);return}FB.Dialog._availScreenWidth=screen.availWidth;if(FB.UA.iPad()){FB.Dialog._centerActive()}else{for(var id in FB.Dialog._dialogs){if(document.getElementById(id)){document.getElementById(id).style.width=FB.UIServer.getDefaultSize().width+"px"}}}},_addOrientationHandler:function(){if(!FB.UA.mobile()){return}var event_name="onorientationchange"in window?"orientationchange":"resize";FB.Dialog._availScreenWidth=screen.availWidth;FB.Event.listen(window,event_name,FB.Dialog._handleOrientationChange)},create:function(opts){opts=opts||{};var dialog=document.createElement("div"),contentRoot=document.createElement("div"),className="fb_dialog";if(opts.closeIcon&&opts.onClose){var closeIcon=document.createElement("a");closeIcon.className="fb_dialog_close_icon";closeIcon.onclick=opts.onClose;dialog.appendChild(closeIcon)}className+=" "+(opts.classes||"");if(FB.UA.ie()){className+=" fb_dialog_legacy";FB.Array.forEach(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],function(name){var span=document.createElement("span");span.className="fb_dialog_"+name;dialog.appendChild(span)})}else{className+=FB.UA.mobile()?" fb_dialog_mobile":" fb_dialog_advanced"}if(opts.content){FB.Content.append(opts.content,contentRoot)}dialog.className=className;var width=parseInt(opts.width,10);if(!isNaN(width)){dialog.style.width=width+"px"}contentRoot.className="fb_dialog_content";dialog.appendChild(contentRoot);if(FB.UA.mobile()){var padding=document.createElement("div");padding.className="fb_dialog_padding";dialog.appendChild(padding)}FB.Content.append(dialog);if(opts.visible){FB.Dialog.show(dialog)}return contentRoot},show:function(dialog){var root=FB.Dialog._findRoot(dialog);if(root){FB.Dialog._removeStacked(root);FB.Dialog._hideLoader();FB.Dialog._makeActive(root);FB.Dialog._stack.push(root);if("fbCallID"in dialog){FB.Dialog.get(dialog.fbCallID).fire("iframe_show")}if(!FB.Event._popStateListenerOn){FB.Event.listen(window,"popstate",FB.Dialog._hideOnPopState);FB.Event._popStateListenerOn=true}}},hide:function(dialog){var root=FB.Dialog._findRoot(dialog);if(root==FB.Dialog._active){FB.Dialog._lowerActive();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay();if("fbCallID"in dialog){FB.Dialog.get(dialog.fbCallID).fire("iframe_hide")}if(FB.Event._popStateListenerOn){FB.Event.unlisten(window,"popstate",FB.Dialog._hideOnPopState);FB.Event._popStateListenerOn=false}}},remove:function(dialog){dialog=FB.Dialog._findRoot(dialog);if(dialog){var is_active=FB.Dialog._active==dialog;FB.Dialog._removeStacked(dialog);if(is_active){FB.Dialog._hideLoader();if(FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop())}else{FB.Dialog._lowerActive();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay()}}else if(FB.Dialog._active===null&&FB.Dialog._stack.length>0){FB.Dialog.show(FB.Dialog._stack.pop())}window.setTimeout(function(){dialog.parentNode.removeChild(dialog)},3e3)}},isActive:function(node){var root=FB.Dialog._findRoot(node);return root&&root===FB.Dialog._active}});FB.provide("",{ui:function(params,cb){params=FB.copy({},params);if(!params.method){FB.log('"method" is a required parameter for FB.ui().');return null}if(FB._nativeInterface){switch(params.method){case"auth.login":FB._nativeInterface.login(params,cb,function(e){alert("Cordova Facebook Connect plugin fail on login!"+e)});break;case"permissions.request":FB._nativeInterface.login(params,cb,function(e){alert("Cordova Facebook Connect plugin fail on login!"+e)});break;case"permissions.oauth":FB._nativeInterface.login(params,cb,function(e){alert("Cordova Facebook Connect plugin fail on login!"+e)});break;case"auth.logout":FB._nativeInterface.logout(cb,function(e){alert("Cordova Facebook Connect plugin fail on logout!")});break;case"auth.status":FB._nativeInterface.getLoginStatus(cb,function(e){alert("Cordova Facebook Connect plugin fail on auth.status!")});break;case"login.status":FB._nativeInterface.getLoginStatus(cb,function(e){alert("Cordova Facebook Connect plugin fail on auth.status!")});break;case"feed":FB._nativeInterface.dialog(params,cb,function(e){alert("Cordova Facebook Connect plugin fail on auth.status!")});break;case"apprequests":FB._nativeInterface.dialog(params,cb,function(e){alert("Cordova Facebook Connect plugin fail on auth.status!")});break}return}if((params.method=="permissions.request"||params.method=="permissions.oauth")&&(params.display=="iframe"||params.display=="dialog")){var perms;var requested_perms;perms=params.scope;requested_perms=perms.split(/\s|,/g);for(var i=0;i<requested_perms.length;i++){var perm=FB.String.trim(requested_perms[i]);if(perm&&!FB.initSitevars.iframePermissions[perm]){params.display="popup";break}}}var call=FB.UIServer.prepareCall(params,cb);if(!call){return null}var displayName=call.params.display;if(displayName==="dialog"){displayName="iframe"}else if(displayName==="none"){displayName="hidden"}var displayFn=FB.UIServer[displayName];if(!displayFn){FB.log('"display" must be one of "popup", '+'"dialog", "iframe", "touch", "async", "hidden", or "none"');return null}displayFn(call);return call.dialog}});FB.provide("UIServer",{Methods:{},_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',_forceHTTPS:false,genericTransform:function(call){if(call.params.display=="dialog"||call.params.display=="iframe"){call.params.display="iframe";call.params.channel=FB.UIServer._xdChannelHandler(call.id,"parent.parent")}return call},prepareCall:function(params,cb){var name=params.method.toLowerCase(),method=FB.copy({},FB.UIServer.Methods[name]),id=FB.guid(),forceHTTPS=method.noHttps!==true&&(FB._https||name!=="auth.status"&&name!="login.status");FB.UIServer._forceHTTPS=forceHTTPS;FB.copy(params,{api_key:FB._apiKey,app_id:FB._apiKey,locale:FB._locale,sdk:"joey",access_token:forceHTTPS&&FB.getAccessToken()||undefined});params.display=FB.UIServer.getDisplayMode(method,params);if(!method.url){method.url="dialog/"+name}var call={cb:cb,id:id,size:method.size||FB.UIServer.getDefaultSize(),url:FB.getDomain(forceHTTPS?"https_www":"www")+method.url,forceHTTPS:forceHTTPS,params:params,name:name,dialog:new FB.Dialog(id)};var transform=method.transform?method.transform:FB.UIServer.genericTransform;if(transform){call=transform(call);if(!call){return}}var getXdRelationFn=method.getXdRelation||FB.UIServer.getXdRelation;var relation=getXdRelationFn(call.params);if(!(call.id in FB.UIServer._defaultCb)&&!("next"in call.params)&&!("redirect_uri"in call.params)){call.params.next=FB.UIServer._xdResult(call.cb,call.id,relation,true)}if(relation==="parent"){call.params.channel_url=FB.UIServer._xdChannelHandler(id,"parent.parent")}call=FB.UIServer.prepareParams(call);return call},prepareParams:function(call){var method=call.params.method;if(!FB.Canvas.isTabIframe()){delete call.params.method}if(FB.TemplateUI&&FB.TemplateUI.supportsTemplate(method,call)){if(FB.reportTemplates){console.log("Using template for "+method+".")}FB.TemplateUI.useCachedUI(method,call)}else{call.params=FB.JSON.flatten(call.params);var encodedQS=FB.QS.encode(call.params);if(!FB.UA.nativeApp()&&FB.UIServer.urlTooLongForIE(call.url+"?"+encodedQS)){call.post=true}else if(encodedQS){call.url+="?"+encodedQS}}return call},urlTooLongForIE:function(fullURL){return fullURL.length>2e3},getDisplayMode:function(method,params){if(params.display==="hidden"||params.display==="none"){return params.display}if(FB.Canvas.isTabIframe()&&params.display!=="popup"){return"async"}if(FB.UA.mobile()||params.display==="touch"){return"touch"}if(!FB.getAccessToken()&&params.display=="dialog"&&!method.loggedOutIframe){FB.log('"dialog" mode can only be used when the user is connected.');return"popup"}if(method.connectDisplay&&!FB._inCanvas){return method.connectDisplay}return params.display||(FB.getAccessToken()?"dialog":"popup")},getXdRelation:function(params){var display=params.display;if(display==="popup"||display==="touch"){return"opener"}if(display==="dialog"||display==="iframe"||display==="hidden"||display==="none"){return"parent"}if(display==="async"){return"parent.frames["+window.name+"]"}},popup:function(call){var _screenX=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,screenY=typeof window.screenY!="undefined"?window.screenY:window.screenTop,outerWidth=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth,outerHeight=typeof window.outerHeight!="undefined"?window.outerHeight:document.documentElement.clientHeight-22,width=FB.UA.mobile()?null:call.size.width,height=FB.UA.mobile()?null:call.size.height,screenX=_screenX<0?window.screen.width+_screenX:_screenX,left=parseInt(screenX+(outerWidth-width)/2,10),top=parseInt(screenY+(outerHeight-height)/2.5,10),features=[];if(width!==null){features.push("width="+width)}if(height!==null){features.push("height="+height)}features.push("left="+left);features.push("top="+top);features.push("scrollbars=1");if(call.name=="permissions.request"||call.name=="permissions.oauth"){features.push("location=1,toolbar=0")}features=features.join(",");if(call.post){FB.UIServer.setLoadedNode(call,window.open("about:blank",call.id,features),"popup");FB.Content.submitToTarget({url:call.url,target:call.id,params:call.params})}else{FB.UIServer.setLoadedNode(call,window.open(call.url,call.id,features),"popup")}if(call.id in FB.UIServer._defaultCb){FB.UIServer._popupMonitor()}},setLoadedNode:function(call,node,type){if(call.params&&call.params.display!="popup"){node.fbCallID=call.id}node={node:node,type:type,fbCallID:call.id};FB.UIServer._loadedNodes[call.id]=node},getLoadedNode:function(call){var id=typeof call=="object"?call.id:call,node=FB.UIServer._loadedNodes[id];return node?node.node:null},hidden:function(call){call.className="FB_UI_Hidden";call.root=FB.Content.appendHidden("");FB.UIServer._insertIframe(call)},iframe:function(call){call.className="FB_UI_Dialog";var onClose=function(){FB.UIServer._triggerDefault(call.id)};call.root=FB.Dialog.create({onClose:onClose,closeIcon:true,classes:FB.UA.iPad()?"centered":""});if(!call.hideLoader){FB.Dialog.showLoader(onClose,call.size.width)}FB.Dom.addCss(call.root,"fb_dialog_iframe");FB.UIServer._insertIframe(call)},touch:function(call){if(call.params&&call.params.in_iframe){if(call.ui_created){FB.Dialog.showLoader(function(){FB.UIServer._triggerDefault(call.id)},0)}else{FB.UIServer.iframe(call)}}else if(FB.UA.nativeApp()&&!call.ui_created){call.frame=call.id;FB.Native.onready(function(){FB.UIServer.setLoadedNode(call,FB.Native.open(call.url+"#cb="+call.frameName))});FB.UIServer._popupMonitor()}else if(!call.ui_created){FB.UIServer.popup(call)}},async:function(call){call.frame=window.name;delete call.url;delete call.size;FB.Arbiter.inform("showDialog",call)},getDefaultSize:function(){if(FB.UA.mobile()){if(FB.UA.iPad()){return{width:500,height:590}}else if(FB.UA.android()){return{width:screen.availWidth,height:screen.availHeight}}else{var width=window.innerWidth;var height=window.innerHeight;var isLandscape=width/height>1.2;return{width:width,height:Math.max(height,isLandscape?screen.width:screen.height)}}}return{width:575,height:240}},_insertIframe:function(call){FB.UIServer._loadedNodes[call.id]=false;var activate=function(node){if(call.id in FB.UIServer._loadedNodes){FB.UIServer.setLoadedNode(call,node,"iframe")}};if(call.post){FB.Content.insertIframe({url:"about:blank",root:call.root,className:call.className,width:call.size.width,height:call.size.height,id:call.id,onInsert:activate,onload:function(node){FB.Content.submitToTarget({url:call.url,target:node.name,params:call.params})}})}else{FB.Content.insertIframe({url:call.url,root:call.root,className:call.className,width:call.size.width,height:call.size.height,id:call.id,name:call.frameName,onInsert:activate})}},_handleResizeMessage:function(frame,data){var node=FB.UIServer.getLoadedNode(frame);if(!node){return}if(data.height){node.style.height=data.height+"px"}if(data.width){node.style.width=data.width+"px"}FB.Arbiter.inform("resize.ack",data||{},"parent.frames["+node.name+"]",true);if(!FB.Dialog.isActive(node)){FB.Dialog.show(node)}},_triggerDefault:function(id){FB.UIServer._xdRecv({frame:id},FB.UIServer._defaultCb[id]||function(){})},_popupMonitor:function(){var found;for(var id in FB.UIServer._loadedNodes){if(FB.UIServer._loadedNodes.hasOwnProperty(id)&&id in FB.UIServer._defaultCb){var node=FB.UIServer._loadedNodes[id];if(node.type!="popup"){continue}win=node.node;try{if(win.closed){FB.UIServer._triggerDefault(id)}else{found=true}}catch(y){}}}if(found&&!FB.UIServer._popupInterval){FB.UIServer._popupInterval=window.setInterval(FB.UIServer._popupMonitor,100)}else if(!found&&FB.UIServer._popupInterval){window.clearInterval(FB.UIServer._popupInterval);FB.UIServer._popupInterval=null}},_xdChannelHandler:function(frame,relation){var forceHTTPS=FB.UIServer._forceHTTPS&&FB.UA.ie()!==7;return FB.XD.handler(function(data){var node=FB.UIServer.getLoadedNode(frame);if(!node){return}if(data.type=="resize"){FB.UIServer._handleResizeMessage(frame,data)}else if(data.type=="hide"){FB.Dialog.hide(node)}else if(data.type=="rendered"){var root=FB.Dialog._findRoot(node);FB.Dialog.show(root)}else if(data.type=="fireevent"){FB.Event.fire(data.event)}},relation,true,null,forceHTTPS)},_xdNextHandler:function(cb,frame,relation,isDefault){if(isDefault){FB.UIServer._defaultCb[frame]=cb}return FB.XD.handler(function(data){FB.UIServer._xdRecv(data,cb)},relation)+"&frame="+frame},_xdRecv:function(data,cb){var frame=FB.UIServer.getLoadedNode(data.frame);if(frame){try{if(FB.Dom.containsCss(frame,"FB_UI_Hidden")){window.setTimeout(function(){frame.parentNode.parentNode.removeChild(frame.parentNode)},3e3)}else if(FB.Dom.containsCss(frame,"FB_UI_Dialog")){FB.Dialog.remove(frame);if(FB.TemplateUI&&FB.UA.mobile()){FB.TemplateUI.populateCache()}}}catch(x){}try{if(frame.close){frame.close();FB.UIServer._popupCount--}}catch(y){}}delete FB.UIServer._loadedNodes[data.frame];delete FB.UIServer._defaultCb[data.frame];cb(data)},_xdResult:function(cb,frame,target,isDefault){return FB.UIServer._xdNextHandler(function(params){cb&&cb(params.result&&params.result!=FB.UIServer._resultToken&&FB.JSON.parse(params.result))},frame,target,isDefault)+"&result="+encodeURIComponent(FB.UIServer._resultToken)}});FB.provide("",{getLoginStatus:function(cb,force){if(!FB._apiKey){FB.log("FB.getLoginStatus() called before calling FB.init().");return}if(cb){if(!force&&FB.Auth._loadState=="loaded"){cb({status:FB._userStatus,authResponse:FB._authResponse});return}else{FB.Event.subscribe("FB.loginStatus",cb)}}if(!force&&FB.Auth._loadState=="loading"){return}FB.Auth._loadState="loading";var lsCb=function(response){FB.Auth._loadState="loaded";FB.Event.fire("FB.loginStatus",response);FB.Event.clear("FB.loginStatus")};FB.Auth.fetchLoginStatus(lsCb)},getAuthResponse:function(){return FB._authResponse},getAccessToken:function(){return FB._authResponse&&FB._authResponse.accessToken||null},getUserID:function(){return FB._userID},login:function(cb,opts){if(opts&&opts.perms&&!opts.scope){opts.scope=opts.perms;delete opts.perms;FB.log("OAuth2 specification states that 'perms' "+"should now be called 'scope'.  Please update.")}FB.ui(FB.copy({method:"permissions.oauth",display:"popup",domain:location.hostname},opts||{}),cb)},logout:function(cb){FB.ui({method:"auth.logout",display:"hidden"},cb)}});FB.provide("Auth",{_callbacks:[],_xdStorePath:"xd_localstorage/",fetchLoginStatus:function(lsCb){if(FB.UA.mobile()&&window.postMessage&&window.localStorage&&!FB._nativeInterface){FB.Auth.staticAuthCheck(lsCb)}else{FB.ui({method:"login.status",display:"none",domain:location.hostname},lsCb)}},staticAuthCheck:function(lsCb){var domain=FB.getDomain("https_staticfb");FB.Content.insertIframe({root:FB.Content.appendHidden(""),className:"FB_UI_Hidden",url:domain+FB.Auth._xdStorePath,onload:function(iframe){var server=frames[iframe.name];var guid=FB.guid();var handled=false;var fn=function(response){if(!handled){handled=true;FB.Auth._staticAuthHandler(lsCb,response)}};FB.XD.handler(fn,"parent",true,guid);setTimeout(fn,500);server.postMessage(FB.JSON.stringify({method:"getItem",params:["LoginInfo_"+FB._apiKey,true],returnCb:guid}),domain)}})},_staticAuthHandler:function(cb,response){if(response&&response.data&&response.data.status&&response.data.status=="connected"){var r;var status=response.data.status;if(response.data.https==1){FB._https=true}var authResponse=response.data.authResponse||null;r=FB.Auth.setAuthResponse(authResponse,status);cb&&cb(r)}else{FB.ui({method:"login.status",display:"none"},cb)}},setAuthResponse:function(authResponse,status){var userID=0;if(authResponse){if(authResponse.userID){userID=authResponse.userID}else if(authResponse.signedRequest){var parsedSignedRequest=FB.Auth.parseSignedRequest(authResponse.signedRequest);if(parsedSignedRequest&&parsedSignedRequest.user_id){userID=parsedSignedRequest.user_id}}}var login=!FB._userID&&authResponse,logout=FB._userID&&!authResponse,both=authResponse&&FB._userID!=userID,authResponseChange=login||logout||both,statusChange=status!=FB._userStatus;var response={authResponse:authResponse,status:status};FB._authResponse=authResponse;FB._userID=userID;FB._userStatus=status;if(logout||both){FB.Event.fire("auth.logout",response)}if(login||both){FB.Event.fire("auth.login",response)}if(authResponseChange){FB.Event.fire("auth.authResponseChange",response)}if(statusChange){FB.Event.fire("auth.statusChange",response)}if(FB.Auth._refreshTimer){window.clearTimeout(FB.Auth._refreshTimer);delete FB.Auth._refreshTimer}if(FB.Auth._loadState&&authResponse){FB.Auth._refreshTimer=window.setTimeout(function(){FB.getLoginStatus(null,true)},12e5)}return response},_getContextType:function(){if(FB.UA.nativeApp()){return 3}if(FB.UA.mobile()){return 2}if(FB._inCanvas){return 5}return 1},xdHandler:function(cb,frame,target,authResponse,method){return FB.UIServer._xdNextHandler(FB.Auth.xdResponseWrapper(cb,authResponse,method),frame,target,true)},xdResponseWrapper:function(cb,authResponse,method){return function(params){if(params.access_token){var parsedSignedRequest=FB.Auth.parseSignedRequest(params.signed_request);authResponse={accessToken:params.access_token,userID:parsedSignedRequest.user_id,expiresIn:parseInt(params.expires_in,10),signedRequest:params.signed_request};if(FB.Cookie.getEnabled()){var expirationTime=authResponse.expiresIn===0?0:(new Date).getTime()+authResponse.expiresIn*1e3;var baseDomain=FB.Cookie._domain;if(!baseDomain&&params.base_domain){baseDomain="."+params.base_domain}FB.Cookie.setSignedRequestCookie(params.signed_request,expirationTime,baseDomain)}FB.Auth.setAuthResponse(authResponse,"connected")}else if(!FB._authResponse&&authResponse){FB.Auth.setAuthResponse(authResponse,"connected")}else if(!(authResponse&&method=="permissions.oauth")){var status;if(params.error&&params.error==="not_authorized"){status="not_authorized"}else{status="unknown"}FB.Auth.setAuthResponse(null,status);if(FB.Cookie.getEnabled()){FB.Cookie.clearSignedRequestCookie()}}if(params&&params.https==1&&!FB._https){FB._https=true}response={authResponse:FB._authResponse,status:FB._userStatus};cb&&cb(response)}},parseSignedRequest:function(signed_request){if(!signed_request){return null}var boom=signed_request.split(".",2);var payload=boom[1];var data=FB.Auth.base64URLDecode(payload);return FB.JSON.parse(data)},base64URLDecode:function(input){input=input.replace(/\-/g,"+").replace(/\_/g,"/");if(input.length%4!==0){var padding=4-input.length%4;for(var d=0;d<padding;d++){input=input+"="}}var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";for(var i=0;i<input.length;i+=4){enc1=keyStr.indexOf(input.charAt(i));enc2=keyStr.indexOf(input.charAt(i+1));enc3=keyStr.indexOf(input.charAt(i+2));enc4=keyStr.indexOf(input.charAt(i+3));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}return unescape(output)}});FB.provide("UIServer.Methods",{"permissions.oauth":{url:"dialog/oauth",size:{width:FB.UA.mobile()?null:627,height:FB.UA.mobile()?null:326},transform:function(call){if(!FB._apiKey){FB.log("FB.login() called before FB.init().");return}if(FB._authResponse&&!call.params.scope){FB.log("FB.login() called when user is already connected.");call.cb&&call.cb({status:FB._userStatus,authResponse:FB._authResponse});return}var cb=call.cb,id=call.id;delete call.cb;FB.copy(call.params,{client_id:FB._apiKey,redirect_uri:FB.URI.resolve(FB.Auth.xdHandler(cb,id,"opener",FB._authResponse,"permissions.oauth")),origin:FB.Auth._getContextType(),response_type:"token,signed_request",domain:location.hostname});return call}},"auth.logout":{url:"logout.php",transform:function(call){if(!FB._apiKey){FB.log("FB.logout() called before calling FB.init().")}else if(!FB._authResponse){FB.log("FB.logout() called without an access token.")}else{call.params.next=FB.Auth.xdHandler(call.cb,call.id,"parent",FB._authResponse);return call}}},"login.status":{url:"dialog/oauth",transform:function(call){var cb=call.cb,id=call.id;delete call.cb;FB.copy(call.params,{client_id:FB._apiKey,redirect_uri:FB.Auth.xdHandler(cb,id,"parent",FB._authResponse),origin:FB.Auth._getContextType(),response_type:"token,signed_request,code",domain:location.hostname});return call}}});FB.provide("CanvasInsights",{setDoneLoading:function(callback){FB.Canvas.setDoneLoading(callback)}});FB.provide("Cookie",{_domain:null,_enabled:false,setEnabled:function(val){FB.Cookie._enabled=!!val;if(typeof val=="string"){FB.Cookie._domain=val}},getEnabled:function(){return FB.Cookie._enabled},loadMeta:function(){var cookie=document.cookie.match("\\bfbm_"+FB._apiKey+"=([^;]*)\\b"),meta;if(cookie){meta=FB.QS.decode(cookie[1]);if(!FB.Cookie._domain){FB.Cookie._domain=meta.base_domain}}return meta},loadSignedRequest:function(){var cookie=document.cookie.match("\\bfbsr_"+FB._apiKey+"=([^;]*)\\b");
if(!cookie){return null}return cookie[1]},setSignedRequestCookie:function(signed_request_cookie,expiration_time,base_domain){if(!signed_request_cookie){throw new Error("Value passed to FB.Cookie.setSignedRequestCookie "+"was empty.")}if(!FB.Cookie.getEnabled()){return}if(base_domain){var meta=FB.QS.encode({base_domain:base_domain});FB.Cookie.setRaw("fbm_",meta,expiration_time,base_domain)}FB.Cookie._domain=base_domain;FB.Cookie.setRaw("fbsr_",signed_request_cookie,expiration_time,base_domain)},clearSignedRequestCookie:function(){if(!FB.Cookie.getEnabled()){return}FB.Cookie.setRaw("fbsr_","",0,FB.Cookie._domain)},setRaw:function(prefix,val,ts,domain){if(domain){document.cookie=prefix+FB._apiKey+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;";document.cookie=prefix+FB._apiKey+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;"+"domain="+location.hostname+";"}var expires=new Date(ts).toGMTString();document.cookie=prefix+FB._apiKey+"="+val+(val&&ts===0?"":"; expires="+expires)+"; path=/"+(domain?"; domain="+domain:"")}});FB.provide("Frictionless",{_allowedRecipients:{},_useFrictionless:false,_updateRecipients:function(){FB.Frictionless._allowedRecipients={};FB.api("/me/apprequestformerrecipients",function(response){if(!response||response.error){return}FB.Array.forEach(response.data,function(recipient){FB.Frictionless._allowedRecipients[recipient.recipient_id]=true},false)})},init:function(){FB.Frictionless._useFrictionless=true;FB.getLoginStatus(function(response){if(response.status=="connected"){FB.Frictionless._updateRecipients()}});FB.Event.subscribe("auth.login",function(login){if(login.authResponse){FB.Frictionless._updateRecipients()}})},_processRequestResponse:function(cb,hidden){return function(params){var updated=params&&params.updated_frictionless;if(FB.Frictionless._useFrictionless&&updated){FB.Frictionless._updateRecipients()}if(params){if(!hidden&&params.frictionless){FB.Dialog._hideLoader();FB.Dialog._restoreBodyPosition();FB.Dialog._hideIPadOverlay()}delete params.frictionless;delete params.updated_frictionless}cb&&cb(params)}},isAllowed:function(user_ids){if(!user_ids){return false}if(typeof user_ids==="number"){return FB.Frictionless._allowedRecipients[user_ids]}if(typeof user_ids==="string"){user_ids=user_ids.split(",")}user_ids=FB.Array.map(user_ids,FB.String.trim);var allowed=true;var has_user_ids=false;FB.Array.forEach(user_ids,function(user_id){allowed=allowed&&FB.Frictionless._allowedRecipients[user_id];has_user_ids=true},false);return allowed&&has_user_ids}});FB.provide("Canvas.Prefetcher",{_sampleRate:0,_appIdsBlacklist:[],_links:[],COLLECT_AUTOMATIC:0,COLLECT_MANUAL:1,_collectionMode:0,addStaticResource:function(url){if(!FB._inCanvas||!FB._apiKey){return}FB.Canvas.Prefetcher._links.push(url)},setCollectionMode:function(mode){if(!FB._inCanvas||!FB._apiKey){return false}if(mode!=FB.Canvas.Prefetcher.COLLECT_AUTOMATIC&&mode!=FB.Canvas.Prefetcher.COLLECT_MANUAL){return false}FB.Canvas.Prefetcher._collectionMode=mode},_maybeSample:function(){if(!FB._inCanvas||!FB._apiKey||!FB.Canvas.Prefetcher._sampleRate){return}var rand=Math.random();if(rand>1/FB.Canvas.Prefetcher._sampleRate){return}if(FB.Canvas.Prefetcher._appIdsBlacklist=="*"){return}if(FB.Array.indexOf(FB.Canvas.Prefetcher._appIdsBlacklist,parseInt(FB._apiKey,10))!=-1){return}window.setTimeout(FB.Canvas.Prefetcher._sample,3e4)},_sample:function(){var resourceFieldsByTag={object:"data",link:"href",script:"src"};if(FB.Canvas.Prefetcher._collectionMode==FB.Canvas.Prefetcher.COLLECT_AUTOMATIC){FB.Array.forEach(resourceFieldsByTag,function(propertyName,tagName){FB.Array.forEach(window.document.getElementsByTagName(tagName),function(tag){if(tag[propertyName]){FB.Canvas.Prefetcher._links.push(tag[propertyName])}})})}var payload=FB.JSON.stringify(FB.Canvas.Prefetcher._links);FB.api(FB._apiKey+"/staticresources","post",{urls:payload,is_https:FB._https});FB.Canvas.Prefetcher._links=[]}});FB.provide("Canvas.EarlyFlush",{addResource:function(url){return FB.Canvas.Prefetcher.addStaticResource(url)},setCollectionMode:function(mode){return FB.Canvas.Prefetcher.setCollectionMode(mode)}});FB.provide("",{initSitevars:{},init:function(options){options=FB.copy(options||{},{logging:true,status:true});FB._userID=0;FB._apiKey=options.appId||options.apiKey;FB._nativeInterface=options.nativeInterface;if(FB._nativeInterface){FB._nativeInterface.init(FB._apiKey,function(e){alert("Cordova Facebook Connect plugin fail on init!")})}if(!options.logging&&window.location.toString().indexOf("fb_debug=1")<0){FB._logging=false}FB.XD.init(options.channelUrl);if(FB.UA.mobile()&&FB.TemplateUI&&FB.TemplateData&&FB.TemplateData._enabled&&options.useCachedDialogs!==false){FB.TemplateUI.init();FB.Event.subscribe("auth.statusChange",FB.TemplateData.update)}if(options.reportTemplates){FB.reportTemplates=true}if(options.frictionlessRequests){FB.Frictionless.init()}if(FB._apiKey){FB.Cookie.setEnabled(options.cookie);if(options.authResponse){FB.Auth.setAuthResponse(options.authResponse,"connected")}else{var signedRequest=FB.Cookie.loadSignedRequest();var parsedSignedRequest=FB.Auth.parseSignedRequest(signedRequest);FB._userID=parsedSignedRequest&&parsedSignedRequest.user_id||0;FB.Cookie.loadMeta()}if(options.status){FB.getLoginStatus()}}if(FB._inCanvas){FB.Canvas._setHideFlashCallback(options.hideFlashCallback);FB.Canvas.init()}FB.Event.subscribe("xfbml.parse",function(){FB.XFBML.IframeWidget.batchWidgetPipeRequests()});if(options.xfbml){window.setTimeout(function(){if(FB.XFBML){if(FB.initSitevars.parseXFBMLBeforeDomReady){FB.XFBML.parse();var myI=window.setInterval(function(){FB.XFBML.parse()},100);FB.Dom.ready(function(){window.clearInterval(myI);FB.XFBML.parse()})}else{FB.Dom.ready(FB.XFBML.parse)}}},0)}if(FB.Canvas&&FB.Canvas.Prefetcher){FB.Canvas.Prefetcher._maybeSample()}}});FB.provide("UIServer.MobileIframableMethod",{transform:function(call){if(call.params.display==="touch"&&call.params.access_token&&window.postMessage){call.params.channel=FB.UIServer._xdChannelHandler(call.id,"parent");if(!FB.UA.nativeApp()){call.params.in_iframe=1}return call}else{return FB.UIServer.genericTransform(call)}},getXdRelation:function(params){var display=params.display;if(display==="touch"&&window.postMessage&&params.in_iframe){return"parent"}return FB.UIServer.getXdRelation(params)}});FB.provide("UIServer.Methods",{"stream.share":{size:{width:650,height:340},url:"sharer.php",transform:function(call){if(!call.params.u){call.params.u=window.location.toString()}return call}},"fbml.dialog":{size:{width:575,height:300},url:"render_fbml.php",loggedOutIframe:true,transform:function(call){return call}},"auth.logintofacebook":{size:{width:530,height:287},url:"login.php",transform:function(call){call.params.skip_api_login=1;var relation=FB.UIServer.getXdRelation(call.params);var next=FB.UIServer._xdResult(call.cb,call.id,relation,true);call.params.next=FB.getDomain(FB._https?"https_www":"www")+"login.php?"+FB.QS.encode({api_key:FB._apiKey,next:next,skip_api_login:1});return call}},apprequests:{transform:function(call){call=FB.UIServer.MobileIframableMethod.transform(call);call.params.frictionless=FB.Frictionless&&FB.Frictionless._useFrictionless;if(call.params.frictionless){if(FB.Frictionless.isAllowed(call.params.to)){call.params.in_iframe=true;call.hideLoader=true}call.cb=FB.Frictionless._processRequestResponse(call.cb,call.hideLoader)}return call},getXdRelation:function(params){return FB.UIServer.MobileIframableMethod.getXdRelation(params)}},feed:FB.UIServer.MobileIframableMethod});FB.provide("",{share:function(u){FB.log("FB.share() has been deprecated. Please use FB.ui() instead.");FB.ui({display:"popup",method:"stream.share",u:u})},publish:function(post,cb){FB.log("FB.publish() has been deprecated. Please use FB.ui() instead.");post=post||{};FB.ui(FB.copy({display:"popup",method:"stream.publish",preview:1},post||{}),cb)},addFriend:function(id,cb){FB.log("FB.addFriend() has been deprecated. Please use FB.ui() instead.");FB.ui({display:"popup",id:id,method:"friend.add"},cb)}});FB.UIServer.Methods["auth.login"]=FB.UIServer.Methods["permissions.request"];FB.provide("XFBML",{_renderTimeout:3e4,getElements:function(dom,xmlns,localName){var arr=FB.Array,xfbmlDoms=FB.XFBML._getDomElements(dom,xmlns,localName),html5Doms=FB.Dom.getByClass(xmlns+"-"+localName,dom,"div");xfbmlDoms=arr.toArray(xfbmlDoms);html5Doms=arr.toArray(html5Doms);html5Doms=arr.filter(html5Doms,function(el){return!el.hasChildNodes()||el.childNodes.length===1&&el.childNodes[0].nodeType===3});return arr.merge(xfbmlDoms,html5Doms)},parse:function(dom,cb){dom=dom||document.body;var count=1,onTagDone=function(){count--;if(count===0){cb&&cb();FB.Event.fire("xfbml.render")}};var cachedDomElements={};if(FB.XFBML._widgetPipeIsEnabled()){FB.Array.forEach(FB.XFBML._tagInfos,function(tagInfo){if(tagInfo.supportsWidgetPipe){var xmlns=tagInfo.xmlns?tagInfo.xmlns:"fb";var xfbmlDoms=FB.XFBML.getElements(dom,xmlns,tagInfo.localName);cachedDomElements[tagInfo.localName]=xfbmlDoms;FB.XFBML._widgetPipeEnabledTagCount+=xfbmlDoms.length}})}FB.Array.forEach(FB.XFBML._tagInfos,function(tagInfo){if(!tagInfo.xmlns){tagInfo.xmlns="fb"}var xfbmlDoms;if(cachedDomElements[tagInfo.localName]!==undefined){xfbmlDoms=cachedDomElements[tagInfo.localName]}else{xfbmlDoms=FB.XFBML.getElements(dom,tagInfo.xmlns,tagInfo.localName)}for(var i=0;i<xfbmlDoms.length;i++){count++;FB.XFBML._processElement(xfbmlDoms[i],tagInfo,onTagDone)}});FB.Event.fire("xfbml.parse");window.setTimeout(function(){if(count>0){FB.log(count+" XFBML tags failed to render in "+FB.XFBML._renderTimeout+"ms.")}},FB.XFBML._renderTimeout);onTagDone()},registerTag:function(tagInfo){FB.XFBML._tagInfos.push(tagInfo)},shouldUseWidgetPipe:function(){if(!FB.XFBML._widgetPipeIsEnabled()){return false}var aboveThreshold=FB.XFBML._widgetPipeEnabledTagCount>1;return aboveThreshold},getBoolAttr:function(el,attr){attr=FB.XFBML.getAttr(el,attr);return attr&&FB.Array.indexOf(["true","1","yes","on"],attr.toLowerCase())>-1},getAttr:function(el,attr){return el.getAttribute(attr)||el.getAttribute(attr.replace(/_/g,"-"))||el.getAttribute(attr.replace(/-/g,"_"))||el.getAttribute(attr.replace(/-/g,""))||el.getAttribute(attr.replace(/_/g,""))||el.getAttribute("data-"+attr)||el.getAttribute("data-"+attr.replace(/_/g,"-"))||el.getAttribute("data-"+attr.replace(/-/g,"_"))||el.getAttribute("data-"+attr.replace(/-/g,""))||el.getAttribute("data-"+attr.replace(/_/g,""))||null},_processElement:function(dom,tagInfo,cb){var element=dom._element;if(element){element.subscribe("render",cb);element.process()}else{var processor=function(){var fn=eval(tagInfo.className);var isLogin=false;var showFaces=true;var showLoginFace=false;var renderInIframe=false;var addToTimeline=tagInfo.className==="FB.XFBML.AddToTimeline";if(tagInfo.className==="FB.XFBML.LoginButton"||addToTimeline){renderInIframe=FB.XFBML.getBoolAttr(dom,"render-in-iframe");mode=FB.XFBML.getAttr(dom,"mode");showFaces=addToTimeline&&mode!="button"||FB.XFBML.getBoolAttr(dom,"show-faces");showLoginFace=FB.XFBML.getBoolAttr(dom,"show-login-face");isLogin=addToTimeline||renderInIframe||showFaces||showLoginFace||FB.XFBML.getBoolAttr(dom,"oneclick");if(isLogin&&!addToTimeline){fn=FB.XFBML.Login}}element=dom._element=new fn(dom);if(isLogin){showFaces=!!showFaces;showLoginFace=!!showLoginFace;var extraParams={show_faces:showFaces,show_login_face:showLoginFace,add_to_profile:addToTimeline,mode:mode};var scope=FB.XFBML.getAttr(dom,"scope")||FB.XFBML.getAttr(dom,"perms");if(scope){extraParams.scope=scope}element.setExtraParams(extraParams)}element.subscribe("render",cb);element.process()};if(FB.CLASSES[tagInfo.className.substr(3)]){processor()}else{FB.log("Tag "+tagInfo.className+" was not found.")}}},_getDomElements:function(dom,xmlns,localName){var fullName=xmlns+":"+localName;if(FB.UA.firefox()){return dom.getElementsByTagNameNS(document.body.namespaceURI,fullName)}else if(FB.UA.ie()<9){try{var docNamespaces=document.namespaces;if(docNamespaces&&docNamespaces[xmlns]){var nodes=dom.getElementsByTagName(localName);if(!document.addEventListener||nodes.length>0){return nodes}}}catch(e){}return dom.getElementsByTagName(fullName)}else{return dom.getElementsByTagName(fullName)}},_tagInfos:[{localName:"activity",className:"FB.XFBML.Activity"},{localName:"add-profile-tab",className:"FB.XFBML.AddProfileTab"},{localName:"add-to-timeline",className:"FB.XFBML.AddToTimeline"},{localName:"bookmark",className:"FB.XFBML.Bookmark"},{localName:"comments",className:"FB.XFBML.Comments"},{localName:"comments-count",className:"FB.XFBML.CommentsCount"},{localName:"connect-bar",className:"FB.XFBML.ConnectBar"},{localName:"fan",className:"FB.XFBML.Fan"},{localName:"like",className:"FB.XFBML.Like",supportsWidgetPipe:true},{localName:"like-box",className:"FB.XFBML.LikeBox"},{localName:"live-stream",className:"FB.XFBML.LiveStream"},{localName:"login",className:"FB.XFBML.Login"},{localName:"login-button",className:"FB.XFBML.LoginButton"},{localName:"facepile",className:"FB.XFBML.Facepile"},{localName:"friendpile",className:"FB.XFBML.Friendpile"},{localName:"name",className:"FB.XFBML.Name"},{localName:"profile-pic",className:"FB.XFBML.ProfilePic"},{localName:"question",className:"FB.XFBML.Question"},{localName:"recommendations",className:"FB.XFBML.Recommendations"},{localName:"recommendations-bar",className:"FB.XFBML.RecommendationsBar"},{localName:"registration",className:"FB.XFBML.Registration"},{localName:"send",className:"FB.XFBML.Send"},{localName:"serverfbml",className:"FB.XFBML.ServerFbml"},{localName:"share-button",className:"FB.XFBML.ShareButton"},{localName:"social-context",className:"FB.XFBML.SocialContext"},{localName:"subscribe",className:"FB.XFBML.Subscribe"}],_widgetPipeEnabledTagCount:0,_widgetPipeIsEnabled:function(){return FB.widgetPipeEnabledApps&&FB.widgetPipeEnabledApps[FB._apiKey]!==undefined}});(function(){try{if(document.namespaces&&!document.namespaces.item.fb){document.namespaces.add("fb")}}catch(e){}})();FB.provide("XFBML",{set:function(dom,markup,cb){FB.log("FB.XFBML.set() has been deprecated.");dom.innerHTML=markup;FB.XFBML.parse(dom,cb)}});FB.subclass("Waitable","Obj",function(){},{set:function(value){this.setProperty("value",value)},error:function(ex){this.fire("error",ex)},wait:function(callback,errorHandler){if(errorHandler){this.subscribe("error",errorHandler)}this.monitor("value",this.bind(function(){if(this.value!==undefined){callback(this.value);return true}}))}});FB.subclass("Data.Query","Waitable",function(){if(!FB.Data.Query._c){FB.Data.Query._c=1}this.name="v_"+FB.Data.Query._c++},{parse:function(args){var fql=FB.String.format.apply(null,args),re=/^select (.*?) from (\w+)\s+where (.*)$/i.exec(fql);this.fields=this._toFields(re[1]);this.table=re[2];this.where=this._parseWhere(re[3]);for(var i=1;i<args.length;i++){if(FB.Type.isType(args[i],FB.Data.Query)){args[i].hasDependency=true}}return this},toFql:function(){var s="select "+this.fields.join(",")+" from "+this.table+" where ";switch(this.where.type){case"unknown":s+=this.where.value;break;case"index":s+=this.where.key+"="+this._encode(this.where.value);break;case"in":if(this.where.value.length==1){s+=this.where.key+"="+this._encode(this.where.value[0])}else{s+=this.where.key+" in ("+FB.Array.map(this.where.value,this._encode).join(",")+")"}break}return s},_encode:function(value){return typeof value=="string"?FB.String.quote(value):value},toString:function(){return"#"+this.name},_toFields:function(s){return FB.Array.map(s.split(","),FB.String.trim)},_parseWhere:function(s){var re=/^\s*(\w+)\s*=\s*(.*)\s*$/i.exec(s),result,value,type="unknown";if(re){value=re[2];if(/^(["'])(?:\\?.)*?\1$/.test(value)){value=eval(value);type="index"}else if(/^\d+\.?\d*$/.test(value)){type="index"}}if(type=="index"){result={type:"index",key:re[1],value:value}}else{result={type:"unknown",value:s}}return result}});FB.provide("Data",{query:function(template,data){var query=(new FB.Data.Query).parse(arguments);FB.Data.queue.push(query);FB.Data._waitToProcess();return query},waitOn:function(dependencies,callback){var result=new FB.Waitable,count=dependencies.length;if(typeof callback=="string"){var s=callback;callback=function(args){return eval(s)}}FB.Array.forEach(dependencies,function(item){item.monitor("value",function(){var done=false;if(FB.Data._getValue(item)!==undefined){count--;done=true}if(count===0){var value=callback(FB.Array.map(dependencies,FB.Data._getValue));result.set(value!==undefined?value:true)}return done})});return result},_getValue:function(item){return FB.Type.isType(item,FB.Waitable)?item.value:item},_selectByIndex:function(fields,table,name,value){var query=new FB.Data.Query;query.fields=fields;query.table=table;query.where={type:"index",key:name,value:value};FB.Data.queue.push(query);FB.Data._waitToProcess();return query},_waitToProcess:function(){if(FB.Data.timer<0){FB.Data.timer=setTimeout(FB.Data._process,10)}},_process:function(){FB.Data.timer=-1;var mqueries={},q=FB.Data.queue;FB.Data.queue=[];for(var i=0;i<q.length;i++){var item=q[i];if(item.where.type=="index"&&!item.hasDependency){FB.Data._mergeIndexQuery(item,mqueries)}else{mqueries[item.name]=item}}var params={q:{}};FB.copy(params.q,mqueries,true,function(query){return query.toFql()});params.queries=FB.JSON.stringify(params.queries);FB.api("/fql","GET",params,function(result){if(result.error){FB.Array.forEach(mqueries,function(q1){q1.error(new Error(result.error.message))})}else{FB.Array.forEach(result.data,function(o){mqueries[o.name].set(o.fql_result_set)})}})},_mergeIndexQuery:function(item,mqueries){var key=item.where.key,value=item.where.value;var name="index_"+item.table+"_"+key;var master=mqueries[name];if(!master){master=mqueries[name]=new FB.Data.Query;master.fields=[key];master.table=item.table;master.where={type:"in",key:key,value:[]}}FB.Array.merge(master.fields,item.fields);FB.Array.merge(master.where.value,[value]);master.wait(function(r){item.set(FB.Array.filter(r,function(x){return x[key]==value}))})},timer:-1,queue:[]});window.setTimeout(function(){var pattern=/(connect.facebook.net|facebook.com\/assets.php).*?#(.*)/;FB.Array.forEach(document.getElementsByTagName("script"),function(script){if(script.src){var match=pattern.exec(script.src);if(match){var opts=FB.QS.decode(match[2]);FB.Array.forEach(opts,function(val,key){if(val=="0"){opts[key]=0}});opts.oauth=true;FB.init(opts)}}});if(window.fbAsyncInit&&!window.fbAsyncInit.hasRun){window.fbAsyncInit.hasRun=true;fbAsyncInit()}},0);FB.provide("Native",{NATIVE_READY_EVENT:"fbNativeReady",onready:function(func){if(!FB.UA.nativeApp()){FB.log("FB.Native.onready only works when the page is rendered "+"in a WebView of the native Facebook app. Test if this is the "+"case calling FB.UA.nativeApp()");return}if(window.__fbNative&&!this.nativeReady){FB.provide("Native",window.__fbNative)}if(this.nativeReady){func()}else{var nativeReadyCallback=function(evt){window.removeEventListener(FB.Native.NATIVE_READY_EVENT,nativeReadyCallback);FB.Native.onready(func)};window.addEventListener(FB.Native.NATIVE_READY_EVENT,nativeReadyCallback,false)}}});FB.provide("UIServer.Methods",{"pay.prompt":{transform:function(call){var handler=FB.XD.handler(function(msg){call.cb(FB.JSON.parse(msg.response))},"parent.frames["+(window.name||"iframe_canvas")+"]");call.params.channel=handler;FB.Arbiter.inform("Pay.Prompt",call.params);return false}}});FB.provide("UIServer.Methods",{pay:{size:{width:555,height:120},noHttps:true,connectDisplay:"popup",transform:function(call){if(!FB._inCanvas){call.params.order_info=FB.JSON.stringify(call.params.order_info);return call}var handler=FB.XD.handler(function(msg){call.cb(FB.JSON.parse(msg.response))},"parent.frames["+(window.name||"iframe_canvas")+"]");call.params.channel=handler;call.params.uiserver=true;FB.Arbiter.inform("Pay.Prompt",call.params);return false}}});FB.provide("Helper",{isUser:function(id){return id<22e8||id>=1e14&&id<=0x5b0a58f100ef||id>=89e12&&id<=89999999999999},getLoggedInUser:function(){return FB.getUserID()},upperCaseFirstChar:function(s){if(s.length>0){return s.substr(0,1).toUpperCase()+s.substr(1)}else{return s}},getProfileLink:function(userInfo,html,href){href=href||(userInfo?FB.getDomain("www")+"profile.php?id="+userInfo.uid:null);if(href){html='<a class="fb_link" href="'+href+'">'+html+"</a>"}return html},invokeHandler:function(handler,scope,args){if(handler){if(typeof handler==="string"){eval(handler)}else if(handler.apply){handler.apply(scope,args||[])}}},fireEvent:function(eventName,eventSource){var href=eventSource._attr.href;eventSource.fire(eventName,href);FB.Event.fire(eventName,href,eventSource)},executeFunctionByName:function(functionName){var args=Array.prototype.slice.call(arguments,1);var namespaces=functionName.split(".");var func=namespaces.pop();var context=window;for(var i=0;i<namespaces.length;i++){context=context[namespaces[i]]}return context[func].apply(this,args)}});FB.provide("TemplateData",{_initialized:false,_version:0,_response:null,_localStorageTimeout:60*60*24,_enabled:true,enabled:function(){return FB.TemplateData._enabled&&FB.TemplateData._initialized&&FB.TemplateData.supportsLocalStorage()&&FB._userStatus=="connected"&&FB.TemplateData.getResponse()},supportsLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return false}},_isStale:function(response){if(!response||!response.version||response.version!=FB.TemplateData._version||response.currentUserID!=FB.getUserID()){return true}var currentTime=Math.round((new Date).getTime());return(currentTime-response.setAt)/1e3>FB.TemplateData._localStorageTimeout},getResponse:function(){var self=FB.TemplateData;try{self._response=self._response||self.supportsLocalStorage()&&FB.JSON.parse(localStorage.FB_templateDataResponse||"null")}catch(e){self._response=null}if(self._isStale(self._response)){self.saveResponse(null)}return self._response},saveResponse:function(response){FB.TemplateData._response=response;if(FB.TemplateData.supportsLocalStorage()){localStorage.FB_templateDataResponse=FB.JSON.stringify(response)}},getData:function(){var response=FB.TemplateData.getResponse();return response?response.data:{}},init:function(version){if(!version){return}FB.TemplateData._initialized=true;FB.TemplateData._version=version;if(FB.TemplateData.supportsLocalStorage()&&!("FB_templateDataResponse"in localStorage)){FB.TemplateData.clear()}},clear:function(){FB.TemplateData.saveResponse(null)},update:function(loginStatusResponse){if(FB._userStatus!="connected"){FB.TemplateData.clear()}if(FB._userStatus=="connected"&&!FB.TemplateData.getResponse()){FB.api({method:"dialog.template_data"},function(response){if("error_code"in response){return}var data={data:response,currentUserID:FB.getUserID(),setAt:(new Date).getTime(),version:FB.TemplateData._version};FB.TemplateData.saveResponse(data)})}}});FB.subclass("TemplateUI","Obj",function(method,isPreload){this.method=method;var in_iframe=FB.UA.nativeApp()?0:1;var query_params={display:"touch",preview_template:1,in_iframe:in_iframe,locale:FB._locale,v:FB.TemplateUI._version,user_agent:navigator.userAgent};if(window.devicePixelRatio){query_params.m_pixel_ratio=window.devicePixelRatio}var query_string=FB.QS.encode(query_params);this.cachedCall={url:FB.getDomain("staticfb")+"dialog/"+method+"?"+query_string,frameName:FB.guid(),id:FB.guid(),size:FB.UIServer.getDefaultSize(),hideLoader:true};FB.XD.handler(this.bind(function(data){if(data.type=="getParams"){this.setProperty("getParamsCb",data.returnCb)}}),"parent",true,this.cachedCall.frameName);if(in_iframe){FB.UIServer.iframe(this.cachedCall);FB.Dialog.hide(this.cachedCall.root)}else if(isPreload&&!FB.TemplateUI._preloads[this.cachedCall.url]){var container=document.createElement("div");FB.TemplateUI._preloads[this.cachedCall.url]={container:container};FB.Content.insertIframe({url:this.cachedCall.url,root:FB.Content.appendHidden(container)})}},{use:function(call){if(!this.cachedCall.root){FB.UIServer.touch(this.cachedCall);var preload=FB.TemplateUI._preloads[this.cachedCall.url];if(preload&&preload.container){preload.container.parentNode.removeChild(preload.container);delete preload.container}}call.ui_created=true;call.root=this.cachedCall.root;FB.UIServer.setLoadedNode(call,FB.UIServer.getLoadedNode(this.cachedCall.id));delete FB.UIServer._loadedNodes[this.cachedCall.id];var dialog=FB.Dialog._dialogs[call.id];FB.Dialog._dialogs[this.cachedCall.id]=dialog;dialog.id=this.cachedCall.id;delete FB.Dialog._dialogs[call.id];FB.UIServer.getLoadedNode(call).fbCallID=this.cachedCall.id;this.cachedCall.id=call.id;var template_params={};FB.copy(template_params,call.params);FB.copy(template_params,FB.TemplateData.getData()[this.method]);template_params.frictionless=FB.TemplateUI.isFrictionlessAppRequest(this.method,template_params);template_params.common=FB.TemplateData.getData().common;template_params.method=this.method;this.setParams(template_params);if(FB.UA.nativeApp()){FB.UIServer._popupMonitor()}},setParams:function(params){this.monitor("getParamsCb",this.bind(function(){if(this.getParamsCb){var dialogWindow=frames[this.cachedCall.frameName]||FB.UIServer.getLoadedNode(this.cachedCall);dialogWindow.postMessage(FB.JSON.stringify({params:params,cb:this.getParamsCb}),"*");return true}}))}});FB.provide("TemplateUI",{_timer:null,_cache:{},_preloads:{},_version:0,init:function(){FB.TemplateData.init(FB.TemplateUI._version);FB.TemplateUI.initCache()},useCachedUI:function(method,call){try{FB.TemplateUI.populateCache();cache=FB.TemplateUI._cache[method];delete FB.TemplateUI._cache[method];cache.use(call)}catch(e){FB.TemplateData.clear()}},populateCache:function(isPreload){if(!FB.TemplateData.enabled()||!FB.UA.mobile()){return}clearInterval(FB.TemplateUI._timer);var methods={feed:true,apprequests:true};for(var method in methods){if(!(method in FB.TemplateUI._cache)){FB.TemplateUI._cache[method]=new FB.TemplateUI(method,isPreload)}}},initCache:function(){FB.TemplateUI._timer=setInterval(function(){FB.TemplateUI.populateCache(true)},2e3)},supportsTemplate:function(method,call){return FB.TemplateData.enabled()&&FB.TemplateUI.paramsAllowTemplate(method,call.params)&&call.params.display==="touch"&&FB.UA.mobile()},paramsAllowTemplate:function(method,app_params){var bad_params={feed:{to:1,attachment:1,source:1},apprequests:{}};if(!(method in bad_params)){return false}for(var param in bad_params[method]){if(app_params[param]){return false}}return!FB.TemplateUI.willWriteOnGet(method,app_params)},isFrictionlessAppRequest:function(method,app_params){return method==="apprequests"&&FB.Frictionless&&FB.Frictionless._useFrictionless},willWriteOnGet:function(method,app_params){return FB.TemplateUI.isFrictionlessAppRequest(method,app_params)&&app_params.to&&FB.Frictionless.isAllowed(app_params.to)}});FB.provide("URI",{resolve:function(uri){if(!uri){return window.location.href}var div=document.createElement("div");div.innerHTML='<a href="'+uri.replace(/"/g,"&quot;")+'"></a>';return div.firstChild.href}});FB.Class("XFBML.Element",function(dom){this.dom=dom},FB.copy({getAttribute:function(name,defaultValue,transform){var value=FB.XFBML.getAttr(this.dom,name);return value?transform?transform(value):value:defaultValue},_getBoolAttribute:function(name,defaultValue){if(FB.XFBML.getAttr(this.dom,name)===null){return defaultValue}return FB.XFBML.getBoolAttr(this.dom,name)},_getPxAttribute:function(name,defaultValue){return this.getAttribute(name,defaultValue,function(s){var size=parseInt(s.replace("px",""),10);if(isNaN(size)){return defaultValue}else{return size}})},_getAttributeFromList:function(name,defaultValue,allowed){return this.getAttribute(name,defaultValue,function(s){s=s.toLowerCase();if(FB.Array.indexOf(allowed,s)>-1){return s}else{return defaultValue}})},isValid:function(){for(var dom=this.dom;dom;dom=dom.parentNode){if(dom==document.body){return true}}},clear:function(){this.dom.innerHTML=""}},FB.EventProvider));FB.subclass("XFBML.IframeWidget","XFBML.Element",null,{_iframeName:null,_showLoader:true,_refreshOnAuthChange:false,_allowReProcess:false,_fetchPreCachedLoader:false,_visibleAfter:"load",_widgetPipeEnabled:false,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return true},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){if(!this._iframeName&&this._widgetPipeEnabled&&FB.XFBML.shouldUseWidgetPipe()){this._iframeName=this.generateWidgetPipeIframeName();FB.XFBML.IframeWidget.allWidgetPipeIframes[this._iframeName]=this;if(FB.XFBML.IframeWidget.masterWidgetPipeIframe===null){FB.XFBML.IframeWidget.masterWidgetPipeIframe=this}}return this._iframeName},getIframeTitle:function(){},getChannelUrl:function(){if(!this._channelUrl){var self=this;this._channelUrl=FB.XD.handler(function(message){self.fire("xd."+message.type,message)},"parent.parent",true)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(event,message,behavior){if(this.loaded){this._arbiterInform(event,message,behavior)}else{this.subscribe("iframe.onload",FB.bind(this._arbiterInform,this,event,message,behavior))}},_arbiterInform:function(event,message,behavior){var relation='parent.frames["'+this.getIframeNode().name+'"]';FB.Arbiter.inform(event,message,relation,window.location.protocol=="https:",behavior)},getDefaultWebDomain:function(){return"www"},getDefaultStaticDomain:function(){return"cdn"},process:function(force){if(this._done){if(!this._allowReProcess&&!force){return}this.clear()}else{this._oneTimeSetup()}this._done=true;if(!this.setupAndValidate()){this.fire("render");return}if(this._showLoader){this._addLoader()}FB.Dom.addCss(this.dom,"fb_iframe_widget");if(this._visibleAfter!="immediate"){FB.Dom.addCss(this.dom,"fb_hide_iframes")}else{this.subscribe("iframe.onload",FB.bind(this.fire,this,"render"))}var size=this.getSize()||{};var url=this.getFullyQualifiedURL();if(size.width=="100%"){FB.Dom.addCss(this.dom,"fb_iframe_widget_fluid")}FB.Content.insertIframe({url:url,root:this.dom.appendChild(document.createElement("span")),name:this.getIframeName(),title:this.getIframeTitle(),className:FB._localeIsRtl?"fb_rtl":"fb_ltr",height:size.height,width:size.width,onload:FB.bind(this.fire,this,"iframe.onload")});this.loaded=false;this.subscribe("iframe.onload",FB.bind(function(){this.loaded=true},this))},generateWidgetPipeIframeName:function(){FB.XFBML.IframeWidget.widgetPipeIframeCount++;return"fb_iframe_"+FB.XFBML.IframeWidget.widgetPipeIframeCount},getFullyQualifiedURL:function(){if(FB.XFBML.shouldUseWidgetPipe()&&this._widgetPipeEnabled){return this._getWidgetPipeShell()}var url=this._getURL();if(!this._fetchPreCachedLoader){url+="?"+FB.QS.encode(this._getQS())}if(url.length>2e3){url="about:blank";var onload=FB.bind(function(){this._postRequest();this.unsubscribe("iframe.onload",onload)},this);this.subscribe("iframe.onload",onload)}return url},_getWidgetPipeShell:function(){return FB.getDomain("www")+"common/widget_pipe_shell.php"},_oneTimeSetup:function(){this.subscribe("xd.resize",FB.bind(this._handleResizeMsg,this));if(FB.getLoginStatus){this.subscribe("xd.refreshLoginStatus",FB.bind(FB.getLoginStatus,FB,function(){},true));this.subscribe("xd.logout",FB.bind(FB.logout,FB,function(){}))}if(this._refreshOnAuthChange){this._setupAuthRefresh()}if(this._visibleAfter=="load"){this.subscribe("iframe.onload",FB.bind(this._makeVisible,this))}this.oneTimeSetup()},_makeVisible:function(){this._removeLoader();FB.Dom.removeCss(this.dom,"fb_hide_iframes");this.fire("render")},_setupAuthRefresh:function(){FB.getLoginStatus(FB.bind(function(response){var lastStatus=response.status;FB.Event.subscribe("auth.statusChange",FB.bind(function(response){if(!this.isValid()){return}if(lastStatus=="unknown"||response.status=="unknown"){this.process(true)}lastStatus=response.status},this))},this))},_handleResizeMsg:function(message){if(!this.isValid()){return}var iframe=this.getIframeNode();iframe.style.height=message.height+"px";
if(message.width){iframe.style.width=message.width+"px"}iframe.style.border="none";this._makeVisible()},_addLoader:function(){if(!this._loaderDiv){FB.Dom.addCss(this.dom,"fb_iframe_widget_loader");this._loaderDiv=document.createElement("div");this._loaderDiv.className="FB_Loader";this.dom.appendChild(this._loaderDiv)}},_removeLoader:function(){if(this._loaderDiv){FB.Dom.removeCss(this.dom,"fb_iframe_widget_loader");if(this._loaderDiv.parentNode){this._loaderDiv.parentNode.removeChild(this._loaderDiv)}this._loaderDiv=null}},_getQS:function(){return FB.copy({api_key:FB._apiKey,locale:FB._locale,sdk:"joey",ref:this.getAttribute("ref")},this.getUrlBits().params)},_getURL:function(){var domain=this.getDefaultWebDomain(),static_path="";if(this._fetchPreCachedLoader){domain=this.getDefaultStaticDomain();static_path="static/"}return FB.getDomain(domain)+"plugins/"+static_path+this.getUrlBits().name+".php"},_postRequest:function(){FB.Content.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}});FB.provide("XFBML.IframeWidget",{widgetPipeIframeCount:0,masterWidgetPipeIframe:null,allWidgetPipeIframes:{},batchWidgetPipeRequests:function(){if(!FB.XFBML.IframeWidget.masterWidgetPipeIframe){return}var widgetPipeDescriptions=FB.XFBML.IframeWidget._groupWidgetPipeDescriptions();var widgetPipeParams={widget_pipe:FB.JSON.stringify(widgetPipeDescriptions),href:window.location,site:location.hostname,channel:FB.XFBML.IframeWidget.masterWidgetPipeIframe.getChannelUrl(),api_key:FB._apiKey,locale:FB._locale,sdk:"joey"};var widgetPipeIframeName=FB.guid();var masterWidgetPipeDom=FB.XFBML.IframeWidget.masterWidgetPipeIframe.dom;var masterWidgetPipeSpan=masterWidgetPipeDom.appendChild(document.createElement("span"));FB.Content.insertIframe({url:"about:blank",root:masterWidgetPipeSpan,name:widgetPipeIframeName,className:"fb_hidden fb_invisible",onload:function(){FB.Content.submitToTarget({url:FB._domain.www+"widget_pipe.php?widget_pipe=1",target:widgetPipeIframeName,params:widgetPipeParams})}})},_groupWidgetPipeDescriptions:function(){var widgetPipeDescriptions={};for(var key in FB.XFBML.IframeWidget.allWidgetPipeIframes){var controller=FB.XFBML.IframeWidget.allWidgetPipeIframes[key];var urlBits=controller.getUrlBits();var widgetPipeDescription={widget:urlBits.name};FB.copy(widgetPipeDescription,urlBits.params);widgetPipeDescriptions[key]=widgetPipeDescription}return widgetPipeDescriptions}});FB.subclass("XFBML.Activity","XFBML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute("border-color"),colorscheme:this.getAttribute("color-scheme"),filter:this.getAttribute("filter"),action:this.getAttribute("action"),max_age:this.getAttribute("max_age"),font:this.getAttribute("font"),linktarget:this.getAttribute("linktarget","_blank"),header:this._getBoolAttribute("header"),height:this._getPxAttribute("height",300),recommendations:this._getBoolAttribute("recommendations"),site:this.getAttribute("site",location.hostname),width:this._getPxAttribute("width",300)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"activity",params:this._attr}}});FB.subclass("XFBML.ButtonElement","XFBML.Element",null,{_allowedSizes:["icon","small","medium","large","xlarge"],onClick:function(){throw new Error("Inheriting class needs to implement onClick().")},setupAndValidate:function(){return true},getButtonMarkup:function(){return this.getOriginalHTML()},getOriginalHTML:function(){return this._originalHTML},process:function(){if(!("_originalHTML"in this)){this._originalHTML=FB.String.trim(this.dom.innerHTML)}if(!this.setupAndValidate()){this.fire("render");return}var size=this._getAttributeFromList("size","medium",this._allowedSizes),className="",markup="";if(size=="icon"){className="fb_button_simple"}else{var rtl_suffix=FB._localeIsRtl?"_rtl":"";markup=this.getButtonMarkup();className="fb_button"+rtl_suffix+" fb_button_"+size+rtl_suffix}if(markup!==""){this.dom.innerHTML='<a class="'+className+'">'+'<span class="fb_button_text">'+markup+"</span>"+"</a>";this.dom.firstChild.onclick=FB.bind(this.onClick,this)}this.fire("render")}});FB.subclass("XFBML.AddProfileTab","XFBML.ButtonElement",null,{getButtonMarkup:function(){return FB.Intl.tx._("Add Profile Tab on Facebook")},onClick:function(){FB.ui({method:"profile.addtab"},this.bind(function(result){if(result.tab_added){FB.Helper.invokeHandler(this.getAttribute("on-add"),this)}}))}});FB.subclass("XFBML.Facepile","XFBML.IframeWidget",null,{_visibleAfter:"load",_extraParams:{},setupAndValidate:function(){this._attr={href:this.getAttribute("href"),channel:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme","light"),max_rows:this.getAttribute("max-rows"),action:this.getAttribute("action","like"),tense:this.getAttribute("tense","past"),width:this._getPxAttribute("width",200),ref:this.getAttribute("ref"),size:this.getAttribute("size","small"),extended_social_context:this.getAttribute("extended_social_context",false),login_text:this.dom.innerHTML};this.clear();for(var key in this._extraParams){this._attr[key]=this._extraParams[key]}return true},setExtraParams:function(val){this._extraParams=val},oneTimeSetup:function(){var lastStatus=FB._userStatus;FB.Event.subscribe("auth.statusChange",FB.bind(function(response){if(lastStatus=="connected"||response.status=="connected"){this.process(true)}lastStatus=response.status},this))},getSize:function(){if(this._attr.size=="large"){return{width:this._attr.width,height:90}}return{width:this._attr.width,height:70}},getUrlBits:function(){return{name:"facepile",params:this._attr}}});FB.subclass("XFBML.AddToTimeline","XFBML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:300,height:250}},getUrlBits:function(){return{name:"add_to_timeline",params:this._attr}}});FB.subclass("XFBML.Bookmark","XFBML.ButtonElement",null,{getButtonMarkup:function(){return FB.Intl.tx._("Bookmark on Facebook")},onClick:function(){FB.ui({method:"bookmark.add"},this.bind(function(result){if(result.bookmarked){FB.Helper.invokeHandler(this.getAttribute("on-add"),this)}}))}});FB.subclass("XFBML.Comments","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_refreshOnAuthChange:true,setupAndValidate:function(){var attr={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme"),numposts:this.getAttribute("num-posts",10),width:this._getPxAttribute("width",550),href:this.getAttribute("href"),permalink:this.getAttribute("permalink"),publish_feed:this.getAttribute("publish_feed"),mobile:this._getBoolAttribute("mobile")};if(FB.initSitevars.enableMobileComments&&FB.UA.mobile()&&attr.mobile!==false){attr.mobile=true}if(!attr.href){attr.migrated=this.getAttribute("migrated");attr.xid=this.getAttribute("xid");attr.title=this.getAttribute("title",document.title);attr.url=this.getAttribute("url",document.URL);attr.quiet=this.getAttribute("quiet");attr.reverse=this.getAttribute("reverse");attr.simple=this.getAttribute("simple");attr.css=this.getAttribute("css");attr.notify=this.getAttribute("notify");if(!attr.xid){var index=document.URL.indexOf("#");if(index>0){attr.xid=encodeURIComponent(document.URL.substring(0,index))}else{attr.xid=encodeURIComponent(document.URL)}}if(attr.migrated){attr.href="http://www.facebook.com/plugins/comments_v1.php?"+"app_id="+FB._apiKey+"&xid="+encodeURIComponent(attr.xid)+"&url="+encodeURIComponent(attr.url)}}else{var fb_comment_id=this.getAttribute("fb_comment_id");if(!fb_comment_id){fb_comment_id=FB.QS.decode(document.URL.substring(document.URL.indexOf("?")+1)).fb_comment_id;if(fb_comment_id&&fb_comment_id.indexOf("#")>0){fb_comment_id=fb_comment_id.substring(0,fb_comment_id.indexOf("#"))}}if(fb_comment_id){attr.fb_comment_id=fb_comment_id;this.subscribe("render",FB.bind(function(){window.location.hash=this.getIframeNode().id},this))}}this._attr=attr;return true},oneTimeSetup:function(){this.subscribe("xd.addComment",FB.bind(this._handleCommentMsg,this));this.subscribe("xd.commentCreated",FB.bind(this._handleCommentCreatedMsg,this));this.subscribe("xd.commentRemoved",FB.bind(this._handleCommentRemovedMsg,this))},getSize:function(){if(this._attr.mobile){return{width:"100%",height:160}}return{width:this._attr.width,height:160}},getUrlBits:function(){return{name:"comments",params:this._attr}},getDefaultWebDomain:function(){if(this._attr.mobile){return"https_m"}else{return"https_www"}},_handleCommentMsg:function(message){if(!this.isValid()){return}FB.Event.fire("comments.add",{post:message.post,user:message.user,widget:this})},_handleCommentCreatedMsg:function(message){if(!this.isValid()){return}var eventArgs={href:message.href,commentID:message.commentID,parentCommentID:message.parentCommentID};FB.Event.fire("comment.create",eventArgs)},_handleCommentRemovedMsg:function(message){if(!this.isValid()){return}var eventArgs={href:message.href,commentID:message.commentID};FB.Event.fire("comment.remove",eventArgs)}});FB.subclass("XFBML.CommentsCount","XFBML.Element",null,{process:function(){this._href=this.getAttribute("href",window.location.href);this._count=FB.Data._selectByIndex(["commentsbox_count"],"link_stat","url",this._href);FB.Dom.addCss(this.dom,"fb_comments_count_zero");this._count.wait(FB.bind(function(){var c=this._count.value[0].commentsbox_count;this.dom.innerHTML=FB.String.format('<span class="fb_comments_count">{0}</span>',c);if(c>0){FB.Dom.removeCss(this.dom,"fb_comments_count_zero")}this.fire("render")},this))}});FB.provide("Anim",{ate:function(dom,props,duration,callback){duration=!isNaN(parseFloat(duration))&&duration>=0?duration:750;var frame_speed=40,from={},to={},begin=null,s=dom.style,timer=setInterval(FB.bind(function(){if(!begin){begin=(new Date).getTime()}var pd=1;if(duration!=0){pd=Math.min(((new Date).getTime()-begin)/duration,1)}FB.Array.forEach(props,FB.bind(function(value,prop){if(!from[prop]){var style=FB.Dom.getStyle(dom,prop);if(style===false){return}from[prop]=this._parseCSS(style+"")}if(!to[prop]){to[prop]=this._parseCSS(value.toString())}var next="";FB.Array.forEach(from[prop],function(pair,i){if(isNaN(to[prop][i].numPart)&&to[prop][i].textPart=="?"){next=pair.numPart+pair.textPart}else if(isNaN(pair.numPart)){next=pair.textPart}else{next+=pair.numPart+Math.ceil((to[prop][i].numPart-pair.numPart)*Math.sin(Math.PI/2*pd))+to[prop][i].textPart+" "}});FB.Dom.setStyle(dom,prop,next)},this));if(pd==1){clearInterval(timer);if(callback){callback(dom)}}},this),frame_speed)},_parseCSS:function(css){var ret=[];FB.Array.forEach(css.split(" "),function(peice){var num=parseInt(peice,10);ret.push({numPart:num,textPart:peice.replace(num,"")})});return ret}});FB.provide("Insights",{impression:function(params,cb){var g=FB.guid(),u="//ah8.facebook.com/impression.php/"+g+"/",i=new Image(1,1),s=[];if(!params.api_key&&FB._apiKey){params.api_key=FB._apiKey}for(var k in params){s.push(encodeURIComponent(k)+"="+encodeURIComponent(params[k]))}u+="?"+s.join("&");if(cb){i.onload=cb}i.src=u}});FB.subclass("XFBML.ConnectBar","XFBML.Element",null,{_initialHeight:null,_initTopMargin:0,_picFieldName:"pic_square",_page:null,_displayed:false,_notDisplayed:false,_container:null,_animationSpeed:0,process:function(){FB.getLoginStatus(this.bind(function(resp){FB.Event.monitor("auth.statusChange",this.bind(function(){if(this.isValid()&&FB._userStatus=="connected"){this._uid=FB.Helper.getLoggedInUser();FB.api({method:"Connect.shouldShowConnectBar"},this.bind(function(showBar){if(showBar!=2){this._animationSpeed=showBar==0?750:0;this._showBar()}else{this._noRender()}}))}else{this._noRender()}return false}))}))},_showBar:function(){var q1=FB.Data._selectByIndex(["first_name","profile_url",this._picFieldName],"user","uid",this._uid);var q2=FB.Data._selectByIndex(["display_name"],"application","api_key",FB._apiKey);FB.Data.waitOn([q1,q2],FB.bind(function(data){data[0][0].site_name=data[1][0].display_name;if(!this._displayed){this._displayed=true;this._notDisplayed=false;this._renderConnectBar(data[0][0]);this.fire("render");FB.Insights.impression({lid:104,name:"widget_load"});this.fire("connectbar.ondisplay");FB.Event.fire("connectbar.ondisplay",this);FB.Helper.invokeHandler(this.getAttribute("on-display"),this)}},this))},_noRender:function(){if(this._displayed){this._displayed=false;this._closeConnectBar()}if(!this._notDisplayed){this._notDisplayed=true;this.fire("render");this.fire("connectbar.onnotdisplay");FB.Event.fire("connectbar.onnotdisplay",this);FB.Helper.invokeHandler(this.getAttribute("on-not-display"),this)}},_renderConnectBar:function(info){var bar=document.createElement("div"),container=document.createElement("div");bar.className="fb_connect_bar";container.className="fb_reset fb_connect_bar_container";container.appendChild(bar);document.body.appendChild(container);this._container=container;this._initialHeight=Math.round(parseFloat(FB.Dom.getStyle(container,"height"))+parseFloat(FB.Dom.getStyle(container,"borderBottomWidth")));bar.innerHTML=FB.String.format('<div class="fb_buttons">'+'<a href="#" class="fb_bar_close">'+'<img src="{1}" alt="{2}" title="{2}"/>'+"</a>"+"</div>"+'<a href="{7}" class="fb_profile" target="_blank">'+'<img src="{3}" alt="{4}" title="{4}"/>'+"</a>"+"{5}"+" <span>"+'<a href="{8}" class="fb_learn_more" target="_blank">{6}</a> &ndash; '+'<a href="#" class="fb_no_thanks">{0}</a>'+"</span>",FB.Intl.tx._("No Thanks"),FB.getDomain("cdn")+FB.XFBML.ConnectBar.imgs.buttonUrl,FB.Intl.tx._("Close"),info[this._picFieldName]||FB.getDomain("cdn")+FB.XFBML.ConnectBar.imgs.missingProfileUrl,FB.String.escapeHTML(info.first_name),FB.Intl.tx._("Hi {firstName}. <strong>{siteName}</strong> is using Facebook to personalize your experience.",{firstName:FB.String.escapeHTML(info.first_name),siteName:FB.String.escapeHTML(info.site_name)}),FB.Intl.tx._("Learn More"),info.profile_url,FB.getDomain("www")+"sitetour/connect.php");var _this=this;FB.Array.forEach(bar.getElementsByTagName("a"),function(el){el.onclick=FB.bind(_this._clickHandler,_this)});this._page=document.body;var top_margin=0;if(this._page.parentNode){top_margin=Math.round((parseFloat(FB.Dom.getStyle(this._page.parentNode,"height"))-parseFloat(FB.Dom.getStyle(this._page,"height")))/2)}else{top_margin=parseInt(FB.Dom.getStyle(this._page,"marginTop"),10)}top_margin=isNaN(top_margin)?0:top_margin;this._initTopMargin=top_margin;if(!window.XMLHttpRequest){container.className+=" fb_connect_bar_container_ie6"}else{container.style.top=-1*this._initialHeight+"px";FB.Anim.ate(container,{top:"0px"},this._animationSpeed)}var move={marginTop:this._initTopMargin+this._initialHeight+"px"};if(FB.UA.ie()){move.backgroundPositionY=this._initialHeight+"px"}else{move.backgroundPosition="? "+this._initialHeight+"px"}FB.Anim.ate(this._page,move,this._animationSpeed)},_clickHandler:function(e){e=e||window.event;var el=e.target||e.srcElement;while(el.nodeName!="A"){el=el.parentNode}switch(el.className){case"fb_bar_close":FB.api({method:"Connect.connectBarMarkAcknowledged"});FB.Insights.impression({lid:104,name:"widget_user_closed"});this._closeConnectBar();break;case"fb_learn_more":case"fb_profile":window.open(el.href);break;case"fb_no_thanks":this._closeConnectBar();FB.api({method:"Connect.connectBarMarkAcknowledged"});FB.Insights.impression({lid:104,name:"widget_user_no_thanks"});FB.api({method:"auth.revokeAuthorization",block:true},this.bind(function(){this.fire("connectbar.ondeauth");FB.Event.fire("connectbar.ondeauth",this);FB.Helper.invokeHandler(this.getAttribute("on-deauth"),this);if(this._getBoolAttribute("auto-refresh",true)){window.location.reload()}}));break}return false},_closeConnectBar:function(){this._notDisplayed=true;var move={marginTop:this._initTopMargin+"px"};if(FB.UA.ie()){move.backgroundPositionY="0px"}else{move.backgroundPosition="? 0px"}var speed=this._animationSpeed==0?0:300;FB.Anim.ate(this._page,move,speed);FB.Anim.ate(this._container,{top:-1*this._initialHeight+"px"},speed,function(el){el.parentNode.removeChild(el)});this.fire("connectbar.onclose");FB.Event.fire("connectbar.onclose",this);FB.Helper.invokeHandler(this.getAttribute("on-close"),this)}});FB.provide("XFBML.ConnectBar",{imgs:{buttonUrl:"images/facebook-widgets/close_btn.png",missingProfileUrl:"pics/q_silhouette.gif"}});FB.subclass("XFBML.Fan","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={api_key:FB._apiKey,connections:this.getAttribute("connections","10"),css:this.getAttribute("css"),height:this._getPxAttribute("height"),id:this.getAttribute("profile-id"),logobar:this._getBoolAttribute("logo-bar"),name:this.getAttribute("name"),stream:this._getBoolAttribute("stream",true),width:this._getPxAttribute("width",300)};if(!this._attr.id&&!this._attr.name){FB.log('<fb:fan> requires one of the "id" or "name" attributes.');return false}var height=this._attr.height;if(!height){if((!this._attr.connections||this._attr.connections==="0")&&!this._attr.stream){height=65}else if(!this._attr.connections||this._attr.connections==="0"){height=375}else if(!this._attr.stream){height=250}else{height=550}}if(this._attr.logobar){height+=25}this._attr.height=height;return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"fan",params:this._attr}}});FB.subclass("XFBML.Friendpile","XFBML.Facepile",null,{});FB.subclass("XFBML.EdgeCommentWidget","XFBML.IframeWidget",function(opts){this._iframeWidth=opts.width+1;this._iframeHeight=opts.height;this._attr={master_frame_name:opts.masterFrameName,offsetX:opts.relativeWidthOffset-opts.paddingLeft};this.dom=opts.commentNode;this.dom.style.top=opts.relativeHeightOffset+"px";this.dom.style.left=opts.relativeWidthOffset+"px";this.dom.style.zIndex=FB.XFBML.EdgeCommentWidget.NextZIndex++;FB.Dom.addCss(this.dom,"fb_edge_comment_widget")},{_visibleAfter:"load",_showLoader:false,getSize:function(){return{width:this._iframeWidth,height:this._iframeHeight}},getUrlBits:function(){return{name:"comment_widget_shell",params:this._attr}}});FB.provide("XFBML.EdgeCommentWidget",{NextZIndex:1e4});FB.subclass("XFBML.EdgeWidget","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_showLoader:false,_rootPadding:null,setupAndValidate:function(){FB.Dom.addCss(this.dom,"fb_edge_widget_with_comment");this._attr={channel_url:this.getChannelUrl(),debug:this._getBoolAttribute("debug"),href:this.getAttribute("href",window.location.href),is_permalink:this._getBoolAttribute("is-permalink"),node_type:this.getAttribute("node-type","link"),width:this._getWidgetWidth(),font:this.getAttribute("font"),layout:this._getLayout(),colorscheme:this.getAttribute("color-scheme"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),show_faces:this._shouldShowFaces(),no_resize:this._getBoolAttribute("no_resize"),send:this._getBoolAttribute("send"),url_map:this.getAttribute("url_map"),extended_social_context:this._getBoolAttribute("extended_social_context",false)};this._rootPadding={left:parseFloat(FB.Dom.getStyle(this.dom,"paddingLeft")),top:parseFloat(FB.Dom.getStyle(this.dom,"paddingTop"))};return true},oneTimeSetup:function(){this.subscribe("xd.authPrompted",FB.bind(this._onAuthPrompt,this));this.subscribe("xd.edgeCreated",FB.bind(this._onEdgeCreate,this));this.subscribe("xd.edgeRemoved",FB.bind(this._onEdgeRemove,this));this.subscribe("xd.presentEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogPresentation,this));this.subscribe("xd.dismissEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogDismissal,this));this.subscribe("xd.hideEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogHide,this));this.subscribe("xd.showEdgeCommentDialog",FB.bind(this._handleEdgeCommentDialogShow,this))},getSize:function(){return{width:this._getWidgetWidth(),height:this._getWidgetHeight()}},_getWidgetHeight:function(){var layout=this._getLayout();var should_show_faces=this._shouldShowFaces()?"show":"hide";var send=this._getBoolAttribute("send");var box_count=65+(send?25:0);var layoutToDefaultHeightMap={standard:{show:80,hide:35},box_count:{show:box_count,hide:box_count},button_count:{show:21,hide:21},simple:{show:20,hide:20}};return layoutToDefaultHeightMap[layout][should_show_faces]},_getWidgetWidth:function(){var layout=this._getLayout();var send=this._getBoolAttribute("send");var should_show_faces=this._shouldShowFaces()?"show":"hide";var recommend=this.getAttribute("action")==="recommend";var standard_min_width=(recommend?265:225)+(send?60:0);var button_count_default_width=(recommend?130:90)+(send?60:0);var box_count_default_width=this.getAttribute("action")==="recommend"?100:55;var simple_default_width=this.getAttribute("action")==="recommend"?90:50;var layoutToDefaultWidthMap={standard:{show:450,hide:450},box_count:{show:box_count_default_width,hide:box_count_default_width},button_count:{show:button_count_default_width,hide:button_count_default_width},simple:{show:simple_default_width,hide:simple_default_width}};var defaultWidth=layoutToDefaultWidthMap[layout][should_show_faces];var width=this._getPxAttribute("width",defaultWidth);var allowedWidths={standard:{min:standard_min_width,max:900},box_count:{min:box_count_default_width,max:900},button_count:{min:button_count_default_width,max:900},simple:{min:49,max:900}};if(width<allowedWidths[layout].min){width=allowedWidths[layout].min}else if(width>allowedWidths[layout].max){width=allowedWidths[layout].max}return width},_getLayout:function(){return this._getAttributeFromList("layout","standard",["standard","button_count","box_count","simple"])},_shouldShowFaces:function(){return this._getLayout()==="standard"&&this._getBoolAttribute("show-faces",true)},_handleEdgeCommentDialogPresentation:function(message){if(!this.isValid()){return}var comment_node=document.createElement("span");this._commentSlave=this._createEdgeCommentWidget(message,comment_node);this.dom.appendChild(comment_node);this._commentSlave.process();this._commentWidgetNode=comment_node},_createEdgeCommentWidget:function(message,comment_node){var opts={commentNode:comment_node,externalUrl:message.externalURL,masterFrameName:message.masterFrameName,layout:this._getLayout(),relativeHeightOffset:this._getHeightOffset(message),relativeWidthOffset:this._getWidthOffset(message),anchorTargetX:parseFloat(message["query[anchorTargetX]"])+this._rootPadding.left,anchorTargetY:parseFloat(message["query[anchorTargetY]"])+this._rootPadding.top,width:parseFloat(message.width),height:parseFloat(message.height),paddingLeft:this._rootPadding.left};return new FB.XFBML.EdgeCommentWidget(opts)},_getHeightOffset:function(message){return parseFloat(message["anchorGeometry[y]"])+parseFloat(message["anchorPosition[y]"])+this._rootPadding.top},_getWidthOffset:function(message){var off=parseFloat(message["anchorPosition[x]"])+this._rootPadding.left;var plugin_left=FB.Dom.getPosition(this.dom).x;var plugin_width=this.dom.offsetWidth;var screen_width=FB.Dom.getViewportInfo().width;var comment_width=parseFloat(message.width);var flipit=false;if(FB._localeIsRtl){flipit=comment_width<plugin_left}else if(plugin_left+comment_width>screen_width){flipit=true}if(flipit){off+=parseFloat(message["anchorGeometry[x]"])-comment_width}return off},_getCommonEdgeCommentWidgetOpts:function(message,comment_node){return{colorscheme:this._attr.colorscheme,commentNode:comment_node,controllerID:message.controllerID,nodeImageURL:message.nodeImageURL,nodeRef:this._attr.ref,nodeTitle:message.nodeTitle,nodeURL:message.nodeURL,nodeSummary:message.nodeSummary,width:parseFloat(message.width),height:parseFloat(message.height),relativeHeightOffset:this._getHeightOffset(message),relativeWidthOffset:this._getWidthOffset(message),error:message.error,siderender:message.siderender,extended_social_context:message.extended_social_context,anchorTargetX:parseFloat(message["query[anchorTargetX]"])+this._rootPadding.left,anchorTargetY:parseFloat(message["query[anchorTargetY]"])+this._rootPadding.top}},_handleEdgeCommentDialogDismissal:function(message){if(this._commentWidgetNode){this.dom.removeChild(this._commentWidgetNode);delete this._commentWidgetNode}},_handleEdgeCommentDialogHide:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="none"}},_handleEdgeCommentDialogShow:function(){if(this._commentWidgetNode){this._commentWidgetNode.style.display="block"}},_fireEventAndInvokeHandler:function(eventName,eventAttribute){FB.Helper.fireEvent(eventName,this);FB.Helper.invokeHandler(this.getAttribute(eventAttribute),this,[this._attr.href])},_onEdgeCreate:function(){this._fireEventAndInvokeHandler("edge.create","on-create")},_onEdgeRemove:function(){this._fireEventAndInvokeHandler("edge.remove","on-remove")},_onAuthPrompt:function(){this._fireEventAndInvokeHandler("auth.prompt","on-prompt")}});FB.subclass("XFBML.SendButtonFormWidget","XFBML.EdgeCommentWidget",function(opts){this._base(opts);FB.Dom.addCss(this.dom,"fb_send_button_form_widget");FB.Dom.addCss(this.dom,opts.colorscheme);FB.Dom.addCss(this.dom,typeof opts.siderender!="undefined"&&opts.siderender?"siderender":"");this._attr.nodeImageURL=opts.nodeImageURL;this._attr.nodeRef=opts.nodeRef;this._attr.nodeTitle=opts.nodeTitle;this._attr.nodeURL=opts.nodeURL;this._attr.nodeSummary=opts.nodeSummary;this._attr.offsetX=opts.relativeWidthOffset;this._attr.offsetY=opts.relativeHeightOffset;this._attr.anchorTargetX=opts.anchorTargetX;this._attr.anchorTargetY=opts.anchorTargetY;this._attr.channel=this.getChannelUrl();this._attr.controllerID=opts.controllerID;this._attr.colorscheme=opts.colorscheme;this._attr.error=opts.error;this._attr.siderender=opts.siderender;this._attr.extended_social_context=opts.extended_social_context},{_showLoader:true,getUrlBits:function(){return{name:"send_button_form_shell",params:this._attr}},oneTimeSetup:function(){this.subscribe("xd.messageSent",FB.bind(this._onMessageSent,this))},_onMessageSent:function(){FB.Event.fire("message.send",this._attr.nodeURL,this)}});FB.subclass("XFBML.Send","XFBML.EdgeWidget",null,{setupAndValidate:function(){FB.Dom.addCss(this.dom,"fb_edge_widget_with_comment");this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme","light"),href:this.getAttribute("href",window.location.href),ref:this.getAttribute("ref"),extended_social_context:this.getAttribute("extended_social_context",false)};this._rootPadding={left:parseFloat(FB.Dom.getStyle(this.dom,"paddingLeft")),top:parseFloat(FB.Dom.getStyle(this.dom,"paddingTop"))};return true},getUrlBits:function(){return{name:"send",params:this._attr}},_createEdgeCommentWidget:function(message,comment_node){var opts=this._getCommonEdgeCommentWidgetOpts(message,comment_node);return new FB.XFBML.SendButtonFormWidget(opts)},getSize:function(){return{width:FB.XFBML.Send.Dimensions.width,height:FB.XFBML.Send.Dimensions.height}}});FB.provide("XFBML.Send",{Dimensions:{width:80,height:25}});FB.subclass("XFBML.Like","XFBML.EdgeWidget",null,{_widgetPipeEnabled:true,getUrlBits:function(){return{name:"like",params:this._attr}},_createEdgeCommentWidget:function(message,comment_node){if("send"in this._attr&&"widget_type"in message&&message.widget_type=="send"){var opts=this._getCommonEdgeCommentWidgetOpts(message,comment_node);return new FB.XFBML.SendButtonFormWidget(opts)}else{return this._callBase("_createEdgeCommentWidget",message,comment_node)}},getIframeTitle:function(){return"Like this content on Facebook."}});FB.subclass("XFBML.LikeBox","XFBML.EdgeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,connections:this.getAttribute("connections"),css:this.getAttribute("css"),height:this.getAttribute("height"),id:this.getAttribute("profile-id"),header:this._getBoolAttribute("header",true),name:this.getAttribute("name"),show_faces:this._getBoolAttribute("show-faces",true),stream:this._getBoolAttribute("stream",true),width:this._getPxAttribute("width",300),href:this.getAttribute("href"),colorscheme:this.getAttribute("colorscheme","light"),border_color:this.getAttribute("border_color")};if(this._getBoolAttribute("force_wall",false)){this._attr.force_wall=true}if(this._attr.connections==="0"){this._attr.show_faces=false}else if(this._attr.connections){this._attr.show_faces=true}if(!this._attr.id&&!this._attr.name&&!this._attr.href){FB.log('<fb:like-box> requires one of the "id" or "name" attributes.');return false}var height=this._attr.height;if(!height){if(!this._attr.show_faces&&!this._attr.stream){height=62}else{height=95;if(this._attr.show_faces){height+=163}if(this._attr.stream){height+=300}if(this._attr.header&&this._attr.header!=="0"){height+=32}}}this._attr.height=height;this.subscribe("xd.likeboxLiked",FB.bind(this._onLiked,this));this.subscribe("xd.likeboxUnliked",FB.bind(this._onUnliked,this));return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"likebox",params:this._attr}},_onLiked:function(){FB.Helper.fireEvent("edge.create",this)},_onUnliked:function(){FB.Helper.fireEvent("edge.remove",this)}});FB.subclass("XFBML.LiveStream","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={app_id:this.getAttribute("event-app-id"),height:this._getPxAttribute("height",500),hideFriendsTab:this.getAttribute("hide-friends-tab"),redesigned:this._getBoolAttribute("redesigned-stream"),width:this._getPxAttribute("width",400),xid:this.getAttribute("xid","default"),always_post_to_friends:this._getBoolAttribute("always-post-to-friends"),via_url:this.getAttribute("via_url")};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){var name=this._attr.redesigned?"live_stream_box":"livefeed";if(this._getBoolAttribute("modern",false)){name="live_stream"}return{name:name,params:this._attr}}});FB.subclass("XFBML.Login","XFBML.Facepile",null,{_visibleAfter:"load",getSize:function(){return{width:this._attr.width,height:94}},getUrlBits:function(){return{name:"login",params:this._attr}}});FB.subclass("XFBML.LoginButton","XFBML.ButtonElement",null,{setupAndValidate:function(){if(this._alreadySetup){return true}this._alreadySetup=true;this._attr={autologoutlink:this._getBoolAttribute("auto-logout-link"),length:this._getAttributeFromList("length","short",["long","short"]),onlogin:this.getAttribute("on-login"),perms:this.getAttribute("perms"),scope:this.getAttribute("scope"),registration_url:this.getAttribute("registration-url"),status:"unknown"};if(this._attr.autologoutlink){FB.Event.subscribe("auth.statusChange",FB.bind(this.process,this))}if(this._attr.registration_url){FB.Event.subscribe("auth.statusChange",this._saveStatus(this.process,false));FB.getLoginStatus(this._saveStatus(this.process,false))}return true},getButtonMarkup:function(){var originalHTML=this.getOriginalHTML();if(originalHTML){return originalHTML}if(!this._attr.registration_url){if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl.tx._("Facebook Logout")}else if(FB.getAccessToken()){return""}else{return this._getLoginText()}}else{switch(this._attr.status){case"unknown":return this._getLoginText();case"notConnected":case"not_authorized":return FB.Intl.tx._("Register");case"connected":if(FB.getAccessToken()&&this._attr.autologoutlink){return FB.Intl.tx._("Facebook Logout")}return"";default:FB.log("Unknown status: "+this._attr.status);return FB.Intl.tx._("Log In")}}},_getLoginText:function(){return this._attr.length=="short"?FB.Intl.tx._("Log In"):FB.Intl.tx._("Log In with Facebook")},onClick:function(){if(!this._attr.registration_url){if(!FB.getAccessToken()||!this._attr.autologoutlink){FB.login(FB.bind(this._authCallback,this),{perms:this._attr.perms,scope:this._attr.scope})}else{FB.logout(FB.bind(this._authCallback,this))}}else{switch(this._attr.status){case"unknown":FB.ui({method:"auth.logintoFacebook"},FB.bind(function(response){FB.bind(FB.getLoginStatus(this._saveStatus(this._authCallback,true),true),this)
},this));break;case"notConnected":case"not_authorized":window.top.location=this._attr.registration_url;break;case"connected":if(!FB.getAccessToken()||!this._attr.autologoutlink){this._authCallback()}else{FB.logout(FB.bind(this._authCallback,this))}break;default:FB.log("Unknown status: "+this._attr.status)}}},_authCallback:function(response){FB.Helper.invokeHandler(this._attr.onlogin,this,[response])},_saveStatus:function(cb,on_click){return FB.bind(function(response){if(on_click&&this._attr.registration_url&&(this._attr.status=="notConnected"||this._attr.status=="not_authorized")&&(response.status=="notConnected"||response.status=="not_authorized")){window.top.location=this._attr.registration_url}this._attr.status=response.status;if(cb){cb=this.bind(cb,this);return cb(response)}},this)}});FB.subclass("XFBML.Name","XFBML.Element",null,{process:function(){FB.copy(this,{_uid:this.getAttribute("uid"),_firstnameonly:this._getBoolAttribute("first-name-only"),_lastnameonly:this._getBoolAttribute("last-name-only"),_possessive:this._getBoolAttribute("possessive"),_reflexive:this._getBoolAttribute("reflexive"),_objective:this._getBoolAttribute("objective"),_linked:this._getBoolAttribute("linked",true),_subjectId:this.getAttribute("subject-id")});if(!this._uid){FB.log('"uid" is a required attribute for <fb:name>');this.fire("render");return}var fields=[];if(this._firstnameonly){fields.push("first_name")}else if(this._lastnameonly){fields.push("last_name")}else{fields.push("name")}if(this._subjectId){fields.push("sex");if(this._subjectId==FB.Helper.getLoggedInUser()){this._reflexive=true}}var data;FB.Event.monitor("auth.statusChange",this.bind(function(){if(!this.isValid()){this.fire("render");return true}if(!this._uid||this._uid=="loggedinuser"){this._uid=FB.Helper.getLoggedInUser()}if(!this._uid){return}if(FB.Helper.isUser(this._uid)){data=FB.Data._selectByIndex(fields,"user","uid",this._uid)}else{data=FB.Data._selectByIndex(["name","id"],"profile","id",this._uid)}data.wait(this.bind(function(data){if(this._subjectId==this._uid){this._renderPronoun(data[0])}else{this._renderOther(data[0])}this.fire("render")}))}))},_renderPronoun:function(userInfo){var word="",objective=this._objective;if(this._subjectId){objective=true;if(this._subjectId===this._uid){this._reflexive=true}}if(this._uid==FB.Connect.get_loggedInUser()&&this._getBoolAttribute("use-you",true)){if(this._possessive){if(this._reflexive){word="your own"}else{word="your"}}else{if(this._reflexive){word="yourself"}else{word="you"}}}else{switch(userInfo.sex){case"male":if(this._possessive){word=this._reflexive?"his own":"his"}else{if(this._reflexive){word="himself"}else if(objective){word="him"}else{word="he"}}break;case"female":if(this._possessive){word=this._reflexive?"her own":"her"}else{if(this._reflexive){word="herself"}else if(objective){word="her"}else{word="she"}}break;default:if(this._getBoolAttribute("use-they",true)){if(this._possessive){if(this._reflexive){word="their own"}else{word="their"}}else{if(this._reflexive){word="themselves"}else if(objective){word="them"}else{word="they"}}}else{if(this._possessive){if(this._reflexive){word="his/her own"}else{word="his/her"}}else{if(this._reflexive){word="himself/herself"}else if(objective){word="him/her"}else{word="he/she"}}}break}}if(this._getBoolAttribute("capitalize",false)){word=FB.Helper.upperCaseFirstChar(word)}this.dom.innerHTML=word},_renderOther:function(userInfo){var name="",html="";if(this._uid==FB.Helper.getLoggedInUser()&&this._getBoolAttribute("use-you",true)){if(this._reflexive){if(this._possessive){name="your own"}else{name="yourself"}}else{if(this._possessive){name="your"}else{name="you"}}}else if(userInfo){if(null===userInfo.first_name){userInfo.first_name=""}if(null===userInfo.last_name){userInfo.last_name=""}if(this._firstnameonly&&userInfo.first_name!==undefined){name=FB.String.escapeHTML(userInfo.first_name)}else if(this._lastnameonly&&userInfo.last_name!==undefined){name=FB.String.escapeHTML(userInfo.last_name)}if(!name){name=FB.String.escapeHTML(userInfo.name)}if(name!==""&&this._possessive){name+="'s"}}if(!name){name=FB.String.escapeHTML(this.getAttribute("if-cant-see","Facebook User"))}if(name){if(this._getBoolAttribute("capitalize",false)){name=FB.Helper.upperCaseFirstChar(name)}if(userInfo&&this._linked){html=FB.Helper.getProfileLink(userInfo,name,this.getAttribute("href",null))}else{html=name}}this.dom.innerHTML=html}});FB.subclass("XFBML.ProfilePic","XFBML.Element",null,{process:function(){var size=this.getAttribute("size","thumb"),picFieldName=FB.XFBML.ProfilePic._sizeToPicFieldMap[size],width=this._getPxAttribute("width"),height=this._getPxAttribute("height"),style=this.dom.style,uid=this.getAttribute("uid");if(this._getBoolAttribute("facebook-logo")){picFieldName+="_with_logo"}if(width){width=width+"px";style.width=width}if(height){height=height+"px";style.height=height}var renderFn=this.bind(function(result){var userInfo=result?result[0]:null,imgSrc=userInfo?userInfo[picFieldName]:null;if(!imgSrc){imgSrc=FB.getDomain("cdn")+FB.XFBML.ProfilePic._defPicMap[picFieldName]}var styleValue=(width?"width:"+width+";":"")+(height?"height:"+width+";":""),html=FB.String.format('<img src="{0}" alt="{1}" title="{1}" style="{2}" class="{3}" />',imgSrc,userInfo?FB.String.escapeHTML(userInfo.name):"",styleValue,this.dom.className);if(this._getBoolAttribute("linked",true)){html=FB.Helper.getProfileLink(userInfo,html,this.getAttribute("href",null))}this.dom.innerHTML=html;FB.Dom.addCss(this.dom,"fb_profile_pic_rendered");this.fire("render")});FB.Event.monitor("auth.statusChange",this.bind(function(){if(!this.isValid()){this.fire("render");return true}if(this.getAttribute("uid",null)=="loggedinuser"){uid=FB.Helper.getLoggedInUser()}if(FB._userStatus&&uid){FB.Data._selectByIndex(["name",picFieldName],FB.Helper.isUser(uid)?"user":"profile",FB.Helper.isUser(uid)?"uid":"id",uid).wait(renderFn)}else{renderFn()}}))}});FB.provide("XFBML.ProfilePic",{_defPicMap:{pic:"pics/s_silhouette.jpg",pic_big:"pics/d_silhouette.gif",pic_big_with_logo:"pics/d_silhouette_logo.gif",pic_small:"pics/t_silhouette.jpg",pic_small_with_logo:"pics/t_silhouette_logo.gif",pic_square:"pics/q_silhouette.gif",pic_square_with_logo:"pics/q_silhouette_logo.gif",pic_with_logo:"pics/s_silhouette_logo.gif"},_sizeToPicFieldMap:{n:"pic_big",normal:"pic_big",q:"pic_square",s:"pic",small:"pic",square:"pic_square",t:"pic_small",thumb:"pic_small"}});FB.subclass("XFBML.Question","XFBML.IframeWidget",null,{_visibleAfter:"load",setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,permalink:this.getAttribute("permalink"),id:this.getAttribute("id"),width:this._getPxAttribute("width",400),height:0,questiontext:this.getAttribute("questiontext"),options:this.getAttribute("options")};this.subscribe("xd.firstVote",FB.bind(this._onInitialVote,this));this.subscribe("xd.vote",FB.bind(this._onChangedVote,this));return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"question",params:this._attr}},_onInitialVote:function(message){FB.Event.fire("question.firstVote",this._attr.permalink,message.vote)},_onChangedVote:function(message){FB.Event.fire("question.vote",this._attr.permalink,message.vote)}});FB.subclass("XFBML.Recommendations","XFBML.IframeWidget",null,{_visibleAfter:"load",_refreshOnAuthChange:true,setupAndValidate:function(){this._attr={border_color:this.getAttribute("border-color"),colorscheme:this.getAttribute("color-scheme"),filter:this.getAttribute("filter"),font:this.getAttribute("font"),action:this.getAttribute("action"),linktarget:this.getAttribute("linktarget","_blank"),max_age:this.getAttribute("max_age"),header:this._getBoolAttribute("header"),height:this._getPxAttribute("height",300),site:this.getAttribute("site",location.hostname),width:this._getPxAttribute("width",300)};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"recommendations",params:this._attr}}});FB.subclass("XFBML.RecommendationsBar","XFBML.IframeWidget",null,{getUrlBits:function(){return{name:"recommendations_bar",params:this._attr}},setupAndValidate:function(){function interval_queue(interval,func){var last_run=0;var queued=null;function run(){func();queued=null;last_run=(new Date).getTime()}return function(){if(!queued){var now=(new Date).getTime();if(now-last_run<interval){queued=window.setTimeout(run,interval-(now-last_run))}else{run()}}return true}}function validate_trigger(trigger){if(trigger.match(/^\d+(?:\.\d+)?%$/)){var percent=Math.min(Math.max(parseInt(trigger,10),0),100);trigger=percent/100}else if(trigger!="manual"&&trigger!="onvisible"){trigger="onvisible"}return trigger}function validate_read_time(read_time){return Math.max(parseInt(read_time,10)||30,10)}function validate_side(side){if(side=="left"||side=="right"){return side}return FB._localeIsRtl?"left":"right"}this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme"),href:FB.URI.resolve(this.getAttribute("href")),side:validate_side(this.getAttribute("side")),site:this.getAttribute("site"),action:this.getAttribute("action"),ref:this.getAttribute("ref"),max_age:this.getAttribute("max_age"),trigger:validate_trigger(this.getAttribute("trigger","")),read_time:validate_read_time(this.getAttribute("read_time")),num_recommendations:parseInt(this.getAttribute("num_recommendations"),10)||2};FB._inPlugin=true;this._showLoader=false;this.subscribe("iframe.onload",FB.bind(function(){var span=this.dom.children[0];span.className="fbpluginrecommendationsbar"+this._attr.side},this));var action=FB.bind(function(){FB.Event.unlisten(window,"scroll",action);FB.Event.unlisten(document.documentElement,"click",action);FB.Event.unlisten(document.documentElement,"mousemove",action);window.setTimeout(FB.bind(this.arbiterInform,this,"platform/plugins/recommendations_bar/action",null,FB.Arbiter.BEHAVIOR_STATE),this._attr.read_time*1e3);return true},this);FB.Event.listen(window,"scroll",action);FB.Event.listen(document.documentElement,"click",action);FB.Event.listen(document.documentElement,"mousemove",action);if(this._attr.trigger=="manual"){var manual=FB.bind(function(href){if(href==this._attr.href){FB.Event.unsubscribe("xfbml.recommendationsbar.read",manual);this.arbiterInform("platform/plugins/recommendations_bar/trigger",null,FB.Arbiter.BEHAVIOR_STATE)}return true},this);FB.Event.subscribe("xfbml.recommendationsbar.read",manual)}else{var trigger=interval_queue(500,FB.bind(function(){if(this.calculateVisibility()){FB.Event.unlisten(window,"scroll",trigger);FB.Event.unlisten(window,"resize",trigger);this.arbiterInform("platform/plugins/recommendations_bar/trigger",null,FB.Arbiter.BEHAVIOR_STATE)}return true},this));FB.Event.listen(window,"scroll",trigger);FB.Event.listen(window,"resize",trigger);trigger()}this.visible=false;var visible=interval_queue(500,FB.bind(function(){if(!this.visible&&this.calculateVisibility()){this.visible=true;this.arbiterInform("platform/plugins/recommendations_bar/visible")}else if(this.visible&&!this.calculateVisibility()){this.visible=false;this.arbiterInform("platform/plugins/recommendations_bar/invisible")}return true},this));FB.Event.listen(window,"scroll",visible);FB.Event.listen(window,"resize",visible);visible();this.focused=true;var toggleFocused=FB.bind(function(){this.focused=!this.focused;return true},this);FB.Event.listen(window,"blur",toggleFocused);FB.Event.listen(window,"focus",toggleFocused);this.resize_running=false;this.animate=false;this.subscribe("xd.signal_animation",FB.bind(function(){this.animate=true},this));return true},getSize:function(){return{height:25,width:this._attr.action=="recommend"?140:96}},calculateVisibility:function(){var fold=document.documentElement.clientHeight;if(!this.focused&&window.console&&window.console.firebug){return this.visible}switch(this._attr.trigger){case"manual":return false;case"onvisible":var elem=this.dom.getBoundingClientRect().top;return elem<=fold;default:var scroll=window.pageYOffset||document.body.scrollTop;var height=document.documentElement.scrollHeight;return(scroll+fold)/height>=this._attr.trigger}},_handleResizeMsg:function(message){if(!this.isValid()){return}if(message.width){this.getIframeNode().style.width=message.width+"px"}if(message.height){this._setNextResize(message.height);this._checkNextResize()}this._makeVisible()},_setNextResize:function(height){this.next_resize=height},_checkNextResize:function(){if(!this.next_resize||this.resize_running){return}var iframe=this.getIframeNode();var height=this.next_resize;this.next_resize=null;if(this.animate){this.animate=false;this.resize_running=true;FB.Anim.ate(iframe,{height:height+"px"},330,FB.bind(function(){this.resize_running=false;this._checkNextResize()},this))}else{iframe.style.height=height+"px"}}});FB.XFBML.RecommendationsBar.markRead=function(href){FB.Event.fire("xfbml.recommendationsbar.read",href||window.location.href)};FB.subclass("XFBML.Registration","XFBML.IframeWidget",null,{_visibleAfter:"immediate",_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){this._attr={action:this.getAttribute("action"),border_color:this.getAttribute("border-color"),channel_url:this.getChannelUrl(),client_id:FB._apiKey,fb_only:this._getBoolAttribute("fb-only",false),fb_register:this._getBoolAttribute("fb-register",false),fields:this.getAttribute("fields"),height:this._getPxAttribute("height"),redirect_uri:this.getAttribute("redirect-uri",window.location.href),no_footer:this._getBoolAttribute("no-footer"),no_header:this._getBoolAttribute("no-header"),onvalidate:this.getAttribute("onvalidate"),width:this._getPxAttribute("width",600),target:this.getAttribute("target")};if(this._attr.onvalidate){this.subscribe("xd.validate",this.bind(function(message){var value=FB.JSON.parse(message.value);var callback=this.bind(function(errors){FB.Arbiter.inform("Registration.Validation",{errors:errors,id:message.id},'parent.frames["'+this.getIframeNode().name+'"]',this._attr.channel_url.substring(0,5)=="https")});var response=FB.Helper.executeFunctionByName(this._attr.onvalidate,value,callback);if(response){callback(response)}}))}this.subscribe("xd.authLogin",FB.bind(this._onAuthLogin,this));this.subscribe("xd.authLogout",FB.bind(this._onAuthLogout,this));return true},getSize:function(){return{width:this._attr.width,height:this._getHeight()}},_getHeight:function(){if(this._attr.height){return this._attr.height}var fields;if(!this._attr.fields){fields=["name"]}else{try{fields=FB.JSON.parse(this._attr.fields)}catch(e){fields=this._attr.fields.split(/,/)}}if(this._attr.width<this._skinnyWidth){return this._skinnyBaseHeight+fields.length*this._skinnyFieldHeight}else{return this._baseHeight+fields.length*this._fieldHeight}},getUrlBits:function(){return{name:"registration",params:this._attr}},getDefaultWebDomain:function(){return"https_www"},_onAuthLogin:function(){if(!FB.getAuthResponse()){FB.getLoginStatus()}FB.Helper.fireEvent("auth.login",this)},_onAuthLogout:function(){if(!FB.getAuthResponse()){FB.getLoginStatus()}FB.Helper.fireEvent("auth.logout",this)}});FB.subclass("XFBML.ServerFbml","XFBML.IframeWidget",null,{_visibleAfter:"resize",setupAndValidate:function(){this._attr={channel_url:this.getChannelUrl(),fbml:this.getAttribute("fbml"),width:this._getPxAttribute("width")};if(!this._attr.fbml){var child=this.dom.getElementsByTagName("script")[0];if(child&&child.type==="text/fbml"){this._attr.fbml=child.innerHTML}}if(!this._attr.fbml){FB.log('<fb:serverfbml> requires the "fbml" attribute.');return false}return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"serverfbml",params:this._attr}}});FB.subclass("XFBML.ShareButton","XFBML.Element",null,{process:function(){this._href=this.getAttribute("href",window.location.href);this._type=this.getAttribute("type","icon_link");FB.Dom.addCss(this.dom,"fb_share_count_hidden");this._renderButton(true)},_renderButton:function(skipRenderEvent){if(!this.isValid()){this.fire("render");return}var contentStr="",post="",pre="",classStr="",share=FB.Intl.tx._("Share"),wrapperClass="";switch(this._type){case"icon":case"icon_link":classStr="fb_button_simple";contentStr='<span class="fb_button_text">'+(this._type=="icon_link"?share:"&nbsp;")+"</span>";skipRenderEvent=false;break;case"link":contentStr=FB.Intl.tx._("Share on Facebook");skipRenderEvent=false;break;case"button":contentStr='<span class="fb_button_text">'+share+"</span>";classStr="fb_button fb_button_small";skipRenderEvent=false;break;case"button_count":contentStr='<span class="fb_button_text">'+share+"</span>";post='<span class="fb_share_count_nub_right">&nbsp;</span>'+'<span class="fb_share_count fb_share_count_right">'+this._getCounterMarkup()+"</span>";classStr="fb_button fb_button_small";break;default:contentStr='<span class="fb_button_text">'+share+"</span>";pre='<span class="fb_share_count_nub_top">&nbsp;</span>'+'<span class="fb_share_count fb_share_count_top">'+this._getCounterMarkup()+"</span>";classStr="fb_button fb_button_small";wrapperClass="fb_share_count_wrapper"}var a_id=FB.guid();this.dom.innerHTML=FB.String.format('<span class="{0}">{4}<a id="{1}" class="{2}" '+'target="_blank">{3}</a>{5}</span>',wrapperClass,a_id,classStr,contentStr,pre,post);var a=document.getElementById(a_id);a.href=this._href;a.onclick=function(){FB.ui({method:"stream.share",u:this.href});return false};if(!skipRenderEvent){this.fire("render")}},_getCounterMarkup:function(){if(!this._count){this._count=FB.Data._selectByIndex(["total_count"],"link_stat","url",this._href)}var prettyCount="0";if(this._count.value!==undefined){if(this._count.value.length>0){var c=this._count.value[0].total_count;if(c>3){FB.Dom.removeCss(this.dom,"fb_share_count_hidden");prettyCount=c>=1e7?Math.round(c/1e6)+"M":c>=1e4?Math.round(c/1e3)+"K":c}}}else{this._count.wait(FB.bind(this._renderButton,this,false))}return'<span class="fb_share_count_inner">'+prettyCount+"</span>"}});FB.subclass("XFBML.SocialContext","XFBML.IframeWidget",null,{setupAndValidate:function(){var size=this.getAttribute("size","small");this._attr={channel:this.getChannelUrl(),width:this._getPxAttribute("width",400),height:this._getPxAttribute("height",100),ref:this.getAttribute("ref"),size:this.getAttribute("size"),keywords:this.getAttribute("keywords"),urls:this.getAttribute("urls")};return true},getSize:function(){return{width:this._attr.width,height:this._attr.height}},getUrlBits:function(){return{name:"social_context",params:this._attr}}});FB.subclass("XFBML.Subscribe","XFBML.EdgeWidget",null,{setupAndValidate:function(){this._attr={channel:this.getChannelUrl(),api_key:FB._apiKey,font:this.getAttribute("font"),colorscheme:this.getAttribute("colorscheme","light"),href:this.getAttribute("href"),ref:this.getAttribute("ref"),layout:this._getLayout(),show_faces:this._shouldShowFaces(),width:this._getWidgetWidth()};return true},getUrlBits:function(){return{name:"subscribe",params:this._attr}},_getWidgetWidth:function(){var layout=this._getLayout();var layoutToDefaultWidthMap={standard:450,box_count:83,button_count:115};var defaultWidth=layoutToDefaultWidthMap[layout];var width=this._getPxAttribute("width",defaultWidth);var allowedWidths={standard:{min:225,max:900},box_count:{min:43,max:900},button_count:{min:63,max:900}};if(width<allowedWidths[layout].min){width=allowedWidths[layout].min}else if(width>allowedWidths[layout].max){width=allowedWidths[layout].max}return width}});void 0;
//# sourceMappingURL=facebook-js-sdk.min.js.map